import{u as ot,f as Ct,p as Pt,j as n,I as O,q as lt,t as Ot,C as ct,R as ut,i as Ft}from"./app.js";import{r as _}from"./table.js";import{g as kt}from"./vendor.js";import{S as ve}from"./react-select.esm.js";var dt=Symbol.for("immer-nothing"),Ge=Symbol.for("immer-draftable"),U=Symbol.for("immer-state");function L(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ne=Object.getPrototypeOf;function J(e){return!!e&&!!e[U]}function H(e){return e?ft(e)||Array.isArray(e)||!!e[Ge]||!!e.constructor?.[Ge]||oe(e)||ye(e):!1}var Mt=Object.prototype.constructor.toString(),He=new WeakMap;function ft(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let s=He.get(r);return s===void 0&&(s=Function.toString.call(r),He.set(r,s)),s===Mt}function fe(e,t,r=!0){be(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((s,i)=>t(i,s,e))}function be(e){const t=e[U];return t?t.type_:Array.isArray(e)?1:oe(e)?2:ye(e)?3:0}function Ie(e,t){return be(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function pt(e,t,r){const s=be(e);s===2?e.set(t,r):s===3?e.add(r):e[t]=r}function Ut(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function oe(e){return e instanceof Map}function ye(e){return e instanceof Set}function B(e){return e.copy_||e.base_}function Ae(e,t){if(oe(e))return new Map(e);if(ye(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=ft(e);if(t===!0||t==="class_only"&&!r){const s=Object.getOwnPropertyDescriptors(e);delete s[U];let i=Reflect.ownKeys(s);for(let a=0;a<i.length;a++){const o=i[a],l=s[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(s[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(ne(e),s)}else{const s=ne(e);if(s!==null&&r)return{...e};const i=Object.create(s);return Object.assign(i,e)}}function Me(e,t=!1){return ge(e)||J(e)||!H(e)||(be(e)>1&&Object.defineProperties(e,{set:ue,add:ue,clear:ue,delete:ue}),Object.freeze(e),t&&Object.values(e).forEach(r=>Me(r,!0))),e}function Dt(){L(2)}var ue={value:Dt};function ge(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Lt={};function Q(e){const t=Lt[e];return t||L(0,e),t}var se;function ht(){return se}function qt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Qe(e,t){t&&(Q("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ce(e){Pe(e),e.drafts_.forEach($t),e.drafts_=null}function Pe(e){e===se&&(se=e.parent_)}function Ye(e){return se=qt(se,e)}function $t(e){const t=e[U];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Ve(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[U].modified_&&(Ce(t),L(4)),H(e)&&(e=pe(t,e),t.parent_||he(t,e)),t.patches_&&Q("Patches").generateReplacementPatches_(r[U].base_,e,t.patches_,t.inversePatches_)):e=pe(t,r,[]),Ce(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==dt?e:void 0}function pe(e,t,r){if(ge(t))return t;const s=e.immer_.shouldUseStrictIteration(),i=t[U];if(!i)return fe(t,(a,o)=>Xe(e,i,t,a,o,r),s),t;if(i.scope_!==e)return t;if(!i.modified_)return he(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let o=a,l=!1;i.type_===3&&(o=new Set(a),a.clear(),l=!0),fe(o,(f,y)=>Xe(e,i,a,f,y,r,l),s),he(e,a,!1),r&&e.patches_&&Q("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function Xe(e,t,r,s,i,a,o){if(i==null||typeof i!="object"&&!o)return;const l=ge(i);if(!(l&&!o)){if(J(i)){const f=a&&t&&t.type_!==3&&!Ie(t.assigned_,s)?a.concat(s):void 0,y=pe(e,i,f);if(pt(r,s,y),J(y))e.canAutoFreeze_=!1;else return}else o&&r.add(i);if(H(i)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[s]===i&&l)return;pe(e,i),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&(oe(r)?r.has(s):Object.prototype.propertyIsEnumerable.call(r,s))&&he(e,i)}}}function he(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Me(t,r)}function Wt(e,t){const r=Array.isArray(e),s={type_:r?1:0,scope_:t?t.scope_:ht(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=s,a=Ue;r&&(i=[s],a=ie);const{revoke:o,proxy:l}=Proxy.revocable(i,a);return s.draft_=l,s.revoke_=o,l}var Ue={get(e,t){if(t===U)return e;const r=B(e);if(!Ie(r,t))return Kt(e,r,t);const s=r[t];return e.finalized_||!H(s)?s:s===_e(e.base_,t)?(Re(e),e.copy_[t]=Fe(s,e)):s},has(e,t){return t in B(e)},ownKeys(e){return Reflect.ownKeys(B(e))},set(e,t,r){const s=mt(B(e),t);if(s?.set)return s.set.call(e.draft_,r),!0;if(!e.modified_){const i=_e(B(e),t),a=i?.[U];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Ut(r,i)&&(r!==void 0||Ie(e.base_,t)))return!0;Re(e),Oe(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return _e(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Re(e),Oe(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=B(e),s=Reflect.getOwnPropertyDescriptor(r,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:r[t]}},defineProperty(){L(11)},getPrototypeOf(e){return ne(e.base_)},setPrototypeOf(){L(12)}},ie={};fe(Ue,(e,t)=>{ie[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ie.deleteProperty=function(e,t){return ie.set.call(this,e,t,void 0)};ie.set=function(e,t,r){return Ue.set.call(this,e[0],t,r,e[0])};function _e(e,t){const r=e[U];return(r?B(r):e)[t]}function Kt(e,t,r){const s=mt(t,r);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}function mt(e,t){if(!(t in e))return;let r=ne(e);for(;r;){const s=Object.getOwnPropertyDescriptor(r,t);if(s)return s;r=ne(r)}}function Oe(e){e.modified_||(e.modified_=!0,e.parent_&&Oe(e.parent_))}function Re(e){e.copy_||(e.copy_=Ae(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Bt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,s)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const o=this;return function(f=a,...y){return o.produce(f,p=>r.call(this,p,...y))}}typeof r!="function"&&L(6),s!==void 0&&typeof s!="function"&&L(7);let i;if(H(t)){const a=Ye(this),o=Fe(t,void 0);let l=!0;try{i=r(o),l=!1}finally{l?Ce(a):Pe(a)}return Qe(a,s),Ve(i,a)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===dt&&(i=void 0),this.autoFreeze_&&Me(i,!0),s){const a=[],o=[];Q("Patches").generateReplacementPatches_(t,i,a,o),s(a,o)}return i}else L(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,f=>t(f,...l));let s,i;return[this.produce(t,r,(o,l)=>{s=o,i=l}),s,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){H(e)||L(8),J(e)&&(e=zt(e));const t=Ye(this),r=Fe(e,void 0);return r[U].isManual_=!0,Pe(t),r}finishDraft(e,t){const r=e&&e[U];(!r||!r.isManual_)&&L(9);const{scope_:s}=r;return Qe(s,t),Ve(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const s=Q("Patches").applyPatches_;return J(e)?s(e,t):this.produce(e,i=>s(i,t))}};function Fe(e,t){const r=oe(e)?Q("MapSet").proxyMap_(e,t):ye(e)?Q("MapSet").proxySet_(e,t):Wt(e,t);return(t?t.scope_:ht()).drafts_.push(r),r}function zt(e){return J(e)||L(10,e),bt(e)}function bt(e){if(!H(e)||ge(e))return e;const t=e[U];let r,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ae(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else r=Ae(e,!0);return fe(r,(i,a)=>{pt(r,i,bt(a))},s),t&&(t.finalized_=!1),r}var Gt=new Bt,de=Gt.produce,je,Je;function Ht(){return Je||(Je=1,je=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var s,i,a;if(Array.isArray(t)){if(s=t.length,s!=r.length)return!1;for(i=s;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(a=Object.keys(t),s=a.length,s!==Object.keys(r).length)return!1;for(i=s;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,a[i]))return!1;for(i=s;i--!==0;){var o=a[i];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r}),je}var Qt=Ht();const Ze=kt(Qt);var Yt=typeof global=="object"&&global&&global.Object===Object&&global,Vt=typeof self=="object"&&self&&self.Object===Object&&self,De=Yt||Vt||Function("return this")(),Z=De.Symbol,yt=Object.prototype,Xt=yt.hasOwnProperty,Jt=yt.toString,te=Z?Z.toStringTag:void 0;function Zt(e){var t=Xt.call(e,te),r=e[te];try{e[te]=void 0;var s=!0}catch{}var i=Jt.call(e);return s&&(t?e[te]=r:delete e[te]),i}var er=Object.prototype,tr=er.toString;function rr(e){return tr.call(e)}var nr="[object Null]",sr="[object Undefined]",et=Z?Z.toStringTag:void 0;function gt(e){return e==null?e===void 0?sr:nr:et&&et in Object(e)?Zt(e):rr(e)}function ir(e){return e!=null&&typeof e=="object"}var ar="[object Symbol]";function Le(e){return typeof e=="symbol"||ir(e)&&gt(e)==ar}function or(e,t){for(var r=-1,s=e==null?0:e.length,i=Array(s);++r<s;)i[r]=t(e[r],r,e);return i}var qe=Array.isArray,tt=Z?Z.prototype:void 0,rt=tt?tt.toString:void 0;function St(e){if(typeof e=="string")return e;if(qe(e))return or(e,St)+"";if(Le(e))return rt?rt.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function me(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var lr="[object AsyncFunction]",cr="[object Function]",ur="[object GeneratorFunction]",dr="[object Proxy]";function fr(e){if(!me(e))return!1;var t=gt(e);return t==cr||t==ur||t==lr||t==dr}var Te=De["__core-js_shared__"],nt=(function(){var e=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function pr(e){return!!nt&&nt in e}var hr=Function.prototype,mr=hr.toString;function br(e){if(e!=null){try{return mr.call(e)}catch{}try{return e+""}catch{}}return""}var yr=/[\\^$.*+?()[\]{}|]/g,gr=/^\[object .+?Constructor\]$/,Sr=Function.prototype,xr=Object.prototype,vr=Sr.toString,_r=xr.hasOwnProperty,Rr=RegExp("^"+vr.call(_r).replace(yr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function jr(e){if(!me(e)||pr(e))return!1;var t=fr(e)?Rr:gr;return t.test(br(e))}function Tr(e,t){return e?.[t]}function $e(e,t){var r=Tr(e,t);return jr(r)?r:void 0}var st=(function(){try{var e=$e(Object,"defineProperty");return e({},"",{}),e}catch{}})(),wr=9007199254740991,Er=/^(?:0|[1-9]\d*)$/;function Nr(e,t){var r=typeof e;return t=t??wr,!!t&&(r=="number"||r!="symbol"&&Er.test(e))&&e>-1&&e%1==0&&e<t}function Ir(e,t,r){t=="__proto__"&&st?st(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function xt(e,t){return e===t||e!==e&&t!==t}var Ar=Object.prototype,Cr=Ar.hasOwnProperty;function Pr(e,t,r){var s=e[t];(!(Cr.call(e,t)&&xt(s,r))||r===void 0&&!(t in e))&&Ir(e,t,r)}var Or=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fr=/^\w*$/;function kr(e,t){if(qe(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Le(e)?!0:Fr.test(e)||!Or.test(e)||t!=null&&e in Object(t)}var ae=$e(Object,"create");function Mr(){this.__data__=ae?ae(null):{},this.size=0}function Ur(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Dr="__lodash_hash_undefined__",Lr=Object.prototype,qr=Lr.hasOwnProperty;function $r(e){var t=this.__data__;if(ae){var r=t[e];return r===Dr?void 0:r}return qr.call(t,e)?t[e]:void 0}var Wr=Object.prototype,Kr=Wr.hasOwnProperty;function Br(e){var t=this.__data__;return ae?t[e]!==void 0:Kr.call(t,e)}var zr="__lodash_hash_undefined__";function Gr(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ae&&t===void 0?zr:t,this}function Y(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}Y.prototype.clear=Mr;Y.prototype.delete=Ur;Y.prototype.get=$r;Y.prototype.has=Br;Y.prototype.set=Gr;function Hr(){this.__data__=[],this.size=0}function Se(e,t){for(var r=e.length;r--;)if(xt(e[r][0],t))return r;return-1}var Qr=Array.prototype,Yr=Qr.splice;function Vr(e){var t=this.__data__,r=Se(t,e);if(r<0)return!1;var s=t.length-1;return r==s?t.pop():Yr.call(t,r,1),--this.size,!0}function Xr(e){var t=this.__data__,r=Se(t,e);return r<0?void 0:t[r][1]}function Jr(e){return Se(this.__data__,e)>-1}function Zr(e,t){var r=this.__data__,s=Se(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}function ee(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}ee.prototype.clear=Hr;ee.prototype.delete=Vr;ee.prototype.get=Xr;ee.prototype.has=Jr;ee.prototype.set=Zr;var en=$e(De,"Map");function tn(){this.size=0,this.__data__={hash:new Y,map:new(en||ee),string:new Y}}function rn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function xe(e,t){var r=e.__data__;return rn(t)?r[typeof t=="string"?"string":"hash"]:r.map}function nn(e){var t=xe(this,e).delete(e);return this.size-=t?1:0,t}function sn(e){return xe(this,e).get(e)}function an(e){return xe(this,e).has(e)}function on(e,t){var r=xe(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}function V(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}V.prototype.clear=tn;V.prototype.delete=nn;V.prototype.get=sn;V.prototype.has=an;V.prototype.set=on;var ln="Expected a function";function We(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(ln);var r=function(){var s=arguments,i=t?t.apply(this,s):s[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,s);return r.cache=a.set(i,o)||a,o};return r.cache=new(We.Cache||V),r}We.Cache=V;var cn=500;function un(e){var t=We(e,function(s){return r.size===cn&&r.clear(),s}),r=t.cache;return t}var dn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fn=/\\(\\)?/g,pn=un(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(dn,function(r,s,i,a){t.push(i?a.replace(fn,"$1"):s||r)}),t});function hn(e){return e==null?"":St(e)}function vt(e,t){return qe(e)?e:kr(e,t)?[e]:pn(hn(e))}function _t(e){if(typeof e=="string"||Le(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function mn(e,t){t=vt(t,e);for(var r=0,s=t.length;e!=null&&r<s;)e=e[_t(t[r++])];return r&&r==s?e:void 0}function Rt(e,t,r){var s=e==null?void 0:mn(e,t);return s===void 0?r:s}function bn(e,t,r,s){if(!me(e))return e;t=vt(t,e);for(var i=-1,a=t.length,o=a-1,l=e;l!=null&&++i<a;){var f=_t(t[i]),y=r;if(f==="__proto__"||f==="constructor"||f==="prototype")return e;if(i!=o){var p=l[f];y=void 0,y===void 0&&(y=me(p)?p:Nr(t[i+1])?[]:{})}Pr(l,f,y),l=l[f]}return e}function yn(e,t,r){return e==null?e:bn(e,t,r)}const W={"Settings.ConsoleLevel":"Level of logging; choose between CRITICAL, ERROR, WARNING, NOTICE, INFO, DEBUG, TRACE.","Settings.Logging":"Enable writing log output to files.","Settings.CompletedDownloadFolder":"Folder where completed downloads are stored. Replace backslashes with forward slashes.","Settings.FreeSpace":"Desired free space threshold (use K, M, G, T suffix). Set to -1 to disable the free space guard.","Settings.FreeSpaceFolder":"Path used when checking free space. Replace backslashes with forward slashes.","Settings.AutoPauseResume":"Automatically pause and resume torrents in response to the free space guard.","Settings.NoInternetSleepTimer":"Delay, in seconds, before retrying when no internet connectivity is detected.","Settings.LoopSleepTimer":"Delay, in seconds, between processing passes when monitoring torrents.","Settings.SearchLoopDelay":"Delay, in seconds, between media search requests.","Settings.FailedCategory":"Category that marks torrents as failed.","Settings.RecheckCategory":"Category that triggers recheck handling.","Settings.Tagless":"Enable tagless operation when categories are not used.","Settings.IgnoreTorrentsYoungerThan":"Ignore torrents younger than this many seconds when evaluating failures.","Settings.PingURLS":"Hostnames used to test for internet connectivity. They are pinged frequently.","Settings.FFprobeAutoUpdate":"Download and update the bundled ffprobe binary automatically.","Settings.AutoUpdateEnabled":"Enable the background worker that periodically checks for qBitrr updates.","Settings.AutoUpdateCron":"Cron expression describing when to check for updates (default weekly Sunday at 03:00).","Settings.AutoRestartProcesses":"Automatically restart worker processes that crash unexpectedly. Recommended to keep enabled for reliability.","Settings.MaxProcessRestarts":"Maximum number of times a worker process can be restarted within the restart window before auto-restart is disabled. Prevents infinite crash loops.","Settings.ProcessRestartWindow":"Time window in seconds for tracking restart attempts. If MaxProcessRestarts is exceeded within this window, auto-restart is disabled for that process.","Settings.ProcessRestartDelay":"Delay in seconds before restarting a crashed worker process. Gives time for transient issues to resolve.","WebUI.Host":"Interface address for the built-in WebUI. 0.0.0.0 binds on all interfaces.","WebUI.Port":"Port number for the built-in WebUI.","WebUI.Token":"Optional bearer token required by the WebUI/API. Leave empty to disable authentication.","WebUI.LiveArr":"Enable live updates for Arr views.","WebUI.GroupSonarr":"Group Sonarr views by series and seasons in collapsible sections.","WebUI.Theme":"Choose the visual theme for the WebUI (light or dark).","qBit.Disabled":"Disable qBitrr's direct qBittorrent integration (headless mode for search-only setups).","qBit.Host":"qBittorrent WebUI host or IP address.","qBit.Port":"qBittorrent WebUI port.","qBit.UserName":"qBittorrent WebUI username.","qBit.Password":"qBittorrent WebUI password. Remove this if authentication is bypassed for the host.","ARR.Managed":"Toggle whether this Servarr instance is actively managed by qBitrr.","ARR.URI":"Servarr URL, including protocol and port if needed (for example http://localhost:8989).","ARR.APIKey":"Servarr API key from Settings > General > Security.","ARR.Category":"qBittorrent category applied by the Servarr instance to its downloads.","ARR.ReSearch":"Re-run searches for failed torrents that qBitrr removes.","ARR.importMode":"Preferred import mode (Move, Copy, or Auto) when Servarr grabs completed files.","ARR.RssSyncTimer":"Interval, in minutes, between RSS sync requests (0 disables the task).","ARR.RefreshDownloadsTimer":"Interval, in minutes, between queue refresh requests (0 disables the task).","ARR.ArrErrorCodesToBlocklist":"List of Servarr error messages that should trigger blocklisting and cleanup.","EntrySearch.SearchMissing":"Search for missing media items.","EntrySearch.AlsoSearchSpecials":"Include season 0 specials in missing searches.","EntrySearch.Unmonitored":"Include unmonitored series or episodes in searches.","EntrySearch.SearchLimit":"Maximum number of concurrent search tasks (Servarr enforces its own limits).","EntrySearch.SearchByYear":"Order searches by the year the episode or movie first aired.","EntrySearch.SearchInReverse":"Reverse search order (search oldest to newest instead of newest to oldest).","EntrySearch.SearchRequestsEvery":"Delay, in seconds, between submitting individual search requests.","EntrySearch.DoUpgradeSearch":"Search for improved releases even if a file already exists.","EntrySearch.QualityUnmetSearch":"Search again when the quality requirements were not met.","EntrySearch.CustomFormatUnmetSearch":"Search again when the minimum custom format score was not met.","EntrySearch.ForceMinimumCustomFormat":"Automatically remove torrents that do not meet the minimum custom format score.","EntrySearch.SearchAgainOnSearchCompletion":"Restart the search loop when the configured year range is exhausted.","EntrySearch.UseTempForMissing":"Switch to temporary profiles when searching for missing media.","EntrySearch.KeepTempProfile":"Do not revert to the main profile after using the temp profile.","EntrySearch.MainQualityProfile":"Primary quality profile names, in the same order as the temporary profiles.","EntrySearch.TempQualityProfile":"Temporary quality profile names, paired with the primary profiles.","EntrySearch.SearchBySeries":"Search by entire series instead of individual episodes when applicable.","EntrySearch.PrioritizeTodaysReleases":"Prioritise items released today (similar to RSS prioritisation).","EntrySearch.Ombi.SearchOmbiRequests":"Pull pending Ombi requests when SearchMissing is enabled.","EntrySearch.Ombi.OmbiURI":"Ombi server URL.","EntrySearch.Ombi.OmbiAPIKey":"Ombi API key.","EntrySearch.Ombi.ApprovedOnly":"Only process Ombi requests that are approved.","EntrySearch.Ombi.Is4K":"Treat this Ombi configuration as 4K specific.","EntrySearch.Overseerr.SearchOverseerrRequests":"Pull Overseerr requests when SearchMissing is enabled.","EntrySearch.Overseerr.OverseerrURI":"Overseerr server URL.","EntrySearch.Overseerr.OverseerrAPIKey":"Overseerr API key.","EntrySearch.Overseerr.ApprovedOnly":"Only process Overseerr requests that are approved.","EntrySearch.Overseerr.Is4K":"Treat this Overseerr configuration as 4K specific.","Torrent.CaseSensitiveMatches":"When enabled, regex matches will respect case; otherwise they are case-insensitive.","Torrent.FolderExclusionRegex":"Regex patterns that exclude folders outright (full-name match).","Torrent.FileNameExclusionRegex":"Regex patterns that exclude individual files based on the file name.","Torrent.FileExtensionAllowlist":"Allowed file extensions (or regex) for downloads; leave empty to allow all.","Torrent.AutoDelete":"Automatically delete files that are not recognised as media.","Torrent.IgnoreTorrentsYoungerThan":"Ignore torrents younger than this many seconds for failure handling.","Torrent.MaximumETA":"Maximum allowed remaining ETA in seconds; values above this are considered stalled.","Torrent.MaximumDeletablePercentage":"Upper bound for completion percentage when deciding to delete a torrent.","Torrent.DoNotRemoveSlow":"Ignore slow torrents when pruning.","Torrent.StalledDelay":"Minutes to allow stalled torrents before taking action (-1 disables, 0 is infinite).","Torrent.ReSearchStalled":"Re-run searches for stalled torrents before or after removal depending on configuration.","Torrent.RemoveDeadTrackers":"Remove trackers flagged as dead.","Torrent.RemoveTrackerWithMessage":"Tracker status messages that should trigger tracker removal when RemoveDeadTrackers is enabled.","Torrent.SeedingMode.DownloadRateLimitPerTorrent":"Per-torrent download rate limit in bytes per second (-1 disables the limit).","Torrent.SeedingMode.UploadRateLimitPerTorrent":"Per-torrent upload rate limit in bytes per second (-1 disables the limit).","Torrent.SeedingMode.MaxUploadRatio":"Maximum allowed upload ratio (-1 disables the limit).","Torrent.SeedingMode.MaxSeedingTime":"Maximum seeding duration in seconds (-1 disables the limit).","Torrent.SeedingMode.RemoveTorrent":"Removal policy: -1 do not remove, 1 remove on ratio, 2 remove on time, 3 remove on ratio or time, 4 remove on ratio and time."};function it(e){const t=e.join(".");if(W[t])return W[t];if(e.length>1){const s=["ARR",...e.slice(1)].join(".");if(W[s])return W[s];const i=["EntrySearch",...e.slice(2)].join(".");if(e[1]==="EntrySearch"&&W[i])return W[i];const a=["Torrent",...e.slice(2)].join(".");if(e[1]==="Torrent"&&W[a])return W[a]}const r=e[e.length-1];return W[r]}const gn="/static/assets/visibility.svg",ke="/static/assets/plus.svg",Ke="/static/assets/check-mark.svg",Be="/static/assets/trash.svg",ze=/(rad|son|anim|lid)arr/i,we=()=>{const e=document.documentElement.getAttribute("data-theme")==="dark";return{control:t=>({...t,background:e?"#0f131a":"#ffffff",color:e?"#eaeef2":"#1d1d1f",borderColor:e?"#2a2f36":"#d2d2d7",minHeight:"38px",boxShadow:"none","&:hover":{borderColor:e?"#3a4149":"#b8b8bd"}}),menu:t=>({...t,background:e?"#0f131a":"#ffffff",borderColor:e?"#2a2f36":"#d2d2d7",border:`1px solid ${e?"#2a2f36":"#d2d2d7"}`}),option:(t,r)=>({...t,background:r.isFocused?e?"rgba(122, 162, 247, 0.15)":"rgba(0, 113, 227, 0.1)":e?"#0f131a":"#ffffff",color:e?"#eaeef2":"#1d1d1f","&:active":{background:e?"rgba(122, 162, 247, 0.25)":"rgba(0, 113, 227, 0.2)"}}),singleValue:t=>({...t,color:e?"#eaeef2":"#1d1d1f"}),input:t=>({...t,color:e?"#eaeef2":"#1d1d1f"}),placeholder:t=>({...t,color:e?"#9aa3ac":"#6e6e73"}),menuList:t=>({...t,padding:"4px"})}},z=e=>String(e).split(",").map(t=>t.trim()).filter(Boolean),G=e=>Array.isArray(e)?e.join(", "):String(e??""),Sn=["Move","Copy","Auto"],xn=/(.+?[.!?])(\s|$)/;function jt(e){if(!e)return;const t=e.trim();if(!t)return;const r=t.match(xn),s=r?r[1]:t;return s.length>160?`${s.slice(0,157)}…`:s}const Tt=[{label:"Console Level",path:["Settings","ConsoleLevel"],type:"select",options:["CRITICAL","ERROR","WARNING","NOTICE","INFO","DEBUG","TRACE"],required:!0},{label:"Logging",path:["Settings","Logging"],type:"checkbox"},{label:"Completed Download Folder",path:["Settings","CompletedDownloadFolder"],type:"text",required:!0,validate:e=>{const t=String(e??"").trim();if(!t||t.toUpperCase()==="CHANGE_ME")return"Completed Download Folder must be set to a valid path."}},{label:"Free Space",path:["Settings","FreeSpace"],type:"text",required:!0,validate:e=>{const t=String(e??"").trim();if(!t)return"Free Space must be provided.";if(t!=="-1"&&!/^-?\d+(\.\d+)?[KMGTP]?$/i.test(t))return"Free Space must be -1 or a number optionally suffixed with K, M, G, T, or P."}},{label:"Free Space Folder",path:["Settings","FreeSpaceFolder"],type:"text",validate:(e,t)=>{const r=M(t.root,["Settings","FreeSpace"]);if(!(String(r??"").trim()!=="-1"))return;const i=String(e??"").trim();if(!i||i.toUpperCase()==="CHANGE_ME")return"Free Space Folder is required when Free Space monitoring is enabled."}},{label:"Auto Pause/Resume",path:["Settings","AutoPauseResume"],type:"checkbox"},{label:"No Internet Sleep (s)",path:["Settings","NoInternetSleepTimer"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<0)return"No Internet Sleep must be a non-negative number."}},{label:"Loop Sleep (s)",path:["Settings","LoopSleepTimer"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<0)return"Loop Sleep must be a non-negative number."}},{label:"Search Loop Delay (s)",path:["Settings","SearchLoopDelay"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<0)return"Search Loop Delay must be a non-negative number."}},{label:"Failed Category",path:["Settings","FailedCategory"],type:"text"},{label:"Recheck Category",path:["Settings","RecheckCategory"],type:"text"},{label:"Tagless",path:["Settings","Tagless"],type:"checkbox"},{label:"Ignore Torrents Younger Than",path:["Settings","IgnoreTorrentsYoungerThan"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<0)return"Ignore Torrents Younger Than must be a non-negative number."}},{label:"Ping URLs",path:["Settings","PingURLS"],type:"text",parse:z,format:G,placeholder:"one.one.one.one, dns.google.com"},{label:"FFprobe Auto Update",path:["Settings","FFprobeAutoUpdate"],type:"checkbox"},{label:"Auto Update Enabled",path:["Settings","AutoUpdateEnabled"],type:"checkbox"},{label:"Auto Update Cron",path:["Settings","AutoUpdateCron"],type:"text",placeholder:"0 3 * * 0",required:!0,validate:e=>{const r=String(e??"").trim().split(/\s+/).filter(Boolean);if(r.length<5||r.length>6)return"Auto Update Cron must contain 5 or 6 space-separated fields."}},{label:"Auto-Restart Processes",path:["Settings","AutoRestartProcesses"],type:"checkbox"},{label:"Max Process Restarts",path:["Settings","MaxProcessRestarts"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<1)return"Max Process Restarts must be at least 1."}},{label:"Process Restart Window (s)",path:["Settings","ProcessRestartWindow"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<1)return"Process Restart Window must be at least 1 second."}},{label:"Process Restart Delay (s)",path:["Settings","ProcessRestartDelay"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<0)return"Process Restart Delay must be a non-negative number."}}],wt=[{label:"WebUI Host",path:["WebUI","Host"],type:"text",required:!0,validate:e=>{if(!String(e??"").trim())return"WebUI Host is required."}},{label:"WebUI Port",path:["WebUI","Port"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isInteger(t)||t<1||t>65535)return"WebUI Port must be between 1 and 65535."}},{label:"WebUI Token",path:["WebUI","Token"],type:"password",secure:!0,fullWidth:!0}],Et=[{label:"Disabled",path:["qBit","Disabled"],type:"checkbox"},{label:"Host",path:["qBit","Host"],type:"text",required:!0,validate:e=>{if(!String(e??"").trim())return"qBit Host is required."}},{label:"Port",path:["qBit","Port"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isInteger(t)||t<1||t>65535)return"qBit Port must be between 1 and 65535."}},{label:"UserName",path:["qBit","UserName"],type:"text"},{label:"Password",path:["qBit","Password"],type:"password"}],vn=[{label:"Display Name",type:"text",placeholder:"Sonarr-TV",sectionName:!0},{label:"Managed",path:["Managed"],type:"checkbox"},{label:"URI",path:["URI"],type:"text",placeholder:"http://host:port",required:!0,validate:(e,t)=>{const r=String(e??"").trim();if(M(t.section??{},["Managed"])&&(!r||r.toUpperCase()==="CHANGE_ME"))return"URI must be set to a valid URL when the instance is managed."}},{label:"API Key",path:["APIKey"],type:"password",secure:!0,required:!0,validate:(e,t)=>{const r=String(e??"").trim();if(M(t.section??{},["Managed"])&&(!r||r.toUpperCase()==="CHANGE_ME"))return"API Key must be provided when the instance is managed."}},{label:"Category",path:["Category"],type:"text",required:!0,validate:e=>{if(!String(e??"").trim())return"Category is required."}},{label:"Re-search",path:["ReSearch"],type:"checkbox"},{label:"Import Mode",path:["importMode"],type:"select",options:Sn,required:!0},{label:"RSS Sync Timer (min)",path:["RssSyncTimer"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<0)return"RSS Sync Timer must be a non-negative number."}},{label:"Refresh Downloads Timer (min)",path:["RefreshDownloadsTimer"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<0)return"Refresh Downloads Timer must be a non-negative number."}},{label:"Arr Error Codes To Blocklist",path:["ArrErrorCodesToBlocklist"],type:"text",parse:z,format:G}],_n=[{label:"Search Missing",path:["EntrySearch","SearchMissing"],type:"checkbox"},{label:"Also Search Specials",path:["EntrySearch","AlsoSearchSpecials"],type:"checkbox"},{label:"Unmonitored",path:["EntrySearch","Unmonitored"],type:"checkbox"},{label:"Do Upgrade Search",path:["EntrySearch","DoUpgradeSearch"],type:"checkbox"},{label:"Quality Unmet Search",path:["EntrySearch","QualityUnmetSearch"],type:"checkbox"},{label:"Custom Format Unmet Search",path:["EntrySearch","CustomFormatUnmetSearch"],type:"checkbox"},{label:"Force Minimum Custom Format",path:["EntrySearch","ForceMinimumCustomFormat"],type:"checkbox"},{label:"Search Limit",path:["EntrySearch","SearchLimit"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<1)return"Search Limit must be at least 1."}},{label:"Search By Year",path:["EntrySearch","SearchByYear"],type:"checkbox"},{label:"Search In Reverse",path:["EntrySearch","SearchInReverse"],type:"checkbox"},{label:"Search Requests Every (s)",path:["EntrySearch","SearchRequestsEvery"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<1)return"Search Requests Every must be at least 1 second."}},{label:"Search Again On Completion",path:["EntrySearch","SearchAgainOnSearchCompletion"],type:"checkbox"},{label:"Use Temp Profile For Missing",path:["EntrySearch","UseTempForMissing"],type:"checkbox"},{label:"Keep Temp Profile",path:["EntrySearch","KeepTempProfile"],type:"checkbox"},{label:"Force Reset Temp Profiles",path:["EntrySearch","ForceResetTempProfiles"],type:"checkbox",description:"Reset all items using temp profiles to their original main profile on qBitrr startup"},{label:"Temp Profile Reset Timeout (Minutes)",path:["EntrySearch","TempProfileResetTimeoutMinutes"],type:"number",description:"Timeout in minutes after which items with temp profiles are automatically reset to main profile (0 = disabled)"},{label:"Profile Switch Retry Attempts",path:["EntrySearch","ProfileSwitchRetryAttempts"],type:"number",description:"Number of retry attempts for profile switch API calls (default: 3)"},{label:"Search By Series",path:["EntrySearch","SearchBySeries"],type:"select",options:["smart","true","false"],description:"smart = auto (series search for multiple episodes, episode search for single), true = always series search, false = always episode search",format:e=>typeof e=="boolean"?e?"true":"false":String(e||"smart"),parse:e=>{const t=String(e);return t==="true"||t==="false"?t:"smart"}},{label:"Prioritize Today's Releases",path:["EntrySearch","PrioritizeTodaysReleases"],type:"checkbox"}],Rn=[{label:"Search Ombi Requests",path:["EntrySearch","Ombi","SearchOmbiRequests"],type:"checkbox"},{label:"Ombi URI",path:["EntrySearch","Ombi","OmbiURI"],type:"text",placeholder:"http://host:port"},{label:"Ombi API Key",path:["EntrySearch","Ombi","OmbiAPIKey"],type:"password"},{label:"Approved Only",path:["EntrySearch","Ombi","ApprovedOnly"],type:"checkbox"},{label:"Is 4K Instance",path:["EntrySearch","Ombi","Is4K"],type:"checkbox"}],jn=[{label:"Search Overseerr Requests",path:["EntrySearch","Overseerr","SearchOverseerrRequests"],type:"checkbox"},{label:"Overseerr URI",path:["EntrySearch","Overseerr","OverseerrURI"],type:"text",placeholder:"http://host:port"},{label:"Overseerr API Key",path:["EntrySearch","Overseerr","OverseerrAPIKey"],type:"password"},{label:"Approved Only",path:["EntrySearch","Overseerr","ApprovedOnly"],type:"checkbox"},{label:"Is 4K Instance",path:["EntrySearch","Overseerr","Is4K"],type:"checkbox"}],Tn=[{label:"Case Sensitive Matches",path:["Torrent","CaseSensitiveMatches"],type:"checkbox"},{label:"Folder Exclusion Regex",path:["Torrent","FolderExclusionRegex"],type:"text",parse:z,format:G},{label:"File Name Exclusion Regex",path:["Torrent","FileNameExclusionRegex"],type:"text",parse:z,format:G},{label:"File Extension Allowlist",path:["Torrent","FileExtensionAllowlist"],type:"text",parse:z,format:G},{label:"Auto Delete",path:["Torrent","AutoDelete"],type:"checkbox"},{label:"Ignore Torrents Younger Than (s)",path:["Torrent","IgnoreTorrentsYoungerThan"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<0)return"Ignore Torrents Younger Than must be a non-negative number."}},{label:"Maximum ETA (s)",path:["Torrent","MaximumETA"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<-1)return"Maximum ETA must be -1 or a non-negative number."}},{label:"Maximum Deletable Percentage",path:["Torrent","MaximumDeletablePercentage"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<0||t>100)return"Maximum Deletable Percentage must be between 0 and 100."}},{label:"Do Not Remove Slow",path:["Torrent","DoNotRemoveSlow"],type:"checkbox"},{label:"Stalled Delay (min)",path:["Torrent","StalledDelay"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<0)return"Stalled Delay must be a non-negative number."}},{label:"Re-search Stalled",path:["Torrent","ReSearchStalled"],type:"checkbox"}],wn=[{label:"Download Rate Limit Per Torrent",path:["Torrent","SeedingMode","DownloadRateLimitPerTorrent"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<-1)return"Download Rate Limit must be -1 or greater."}},{label:"Upload Rate Limit Per Torrent",path:["Torrent","SeedingMode","UploadRateLimitPerTorrent"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<-1)return"Upload Rate Limit must be -1 or greater."}},{label:"Max Upload Ratio",path:["Torrent","SeedingMode","MaxUploadRatio"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<-1)return"Max Upload Ratio must be -1 or greater."}},{label:"Max Seeding Time (s)",path:["Torrent","SeedingMode","MaxSeedingTime"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<-1)return"Max Seeding Time must be -1 or greater."}},{label:"Remove Torrent (policy)",path:["Torrent","SeedingMode","RemoveTorrent"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t))return"Remove Torrent policy must be a number.";if(t!==-1&&![1,2,3,4].includes(t))return"Remove Torrent policy must be -1, 1, 2, 3, or 4."}},{label:"Remove Dead Trackers",path:["Torrent","SeedingMode","RemoveDeadTrackers"],type:"checkbox"},{label:"Remove Tracker Messages",path:["Torrent","SeedingMode","RemoveTrackerWithMessage"],type:"text",parse:z,format:G,fullWidth:!0}],En=[{label:"Name",path:["Name"],type:"text",required:!0},{label:"URI",path:["URI"],type:"text",required:!0},{label:"Priority",path:["Priority"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<0)return"Priority must be a non-negative number."}},{label:"Maximum ETA",path:["MaximumETA"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<-1)return"Maximum ETA must be -1 or a non-negative number."}},{label:"Download Rate Limit",path:["DownloadRateLimit"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<-1)return"Download Rate Limit must be -1 or greater."}},{label:"Upload Rate Limit",path:["UploadRateLimit"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<-1)return"Upload Rate Limit must be -1 or greater."}},{label:"Max Upload Ratio",path:["MaxUploadRatio"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<-1)return"Max Upload Ratio must be -1 or greater."}},{label:"Max Seeding Time",path:["MaxSeedingTime"],type:"number",validate:e=>{const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t)||t<-1)return"Max Seeding Time must be -1 or greater."}},{label:"Add Tracker If Missing",path:["AddTrackerIfMissing"],type:"checkbox"},{label:"Remove If Exists",path:["RemoveIfExists"],type:"checkbox"},{label:"Super Seed Mode",path:["SuperSeedMode"],type:"checkbox"},{label:"Add Tags",path:["AddTags"],type:"text",parse:z,format:G}];function Nt(e){const t=e.toLowerCase(),r=t.includes("sonarr"),s=t.includes("lidarr"),i=[...vn],a=_n.filter(c=>{if(!c.path)return!0;const T=c.path.join(".");return!(!r&&(T==="EntrySearch.AlsoSearchSpecials"||T==="EntrySearch.SearchBySeries"||T==="EntrySearch.PrioritizeTodaysReleases")||s&&T==="EntrySearch.SearchByYear")}),o=s?[]:[...Rn],l=s?[]:[...jn],f=[...Tn],y=[...wn],p=[...En];return{generalFields:i,entryFields:a,entryOmbiFields:o,entryOverseerrFields:l,torrentFields:f,seedingFields:y,trackerFields:p}}function at(e){return e==null||typeof e=="string"&&e.trim()===""||Array.isArray(e)&&e.length===0}function Nn(e,t){const r=e.label,s=e.required??(e.type==="number"||e.type==="select");switch(e.type){case"text":case"password":return s&&at(t)?`${r} is required.`:void 0;case"number":{if(t==null||t==="")return s?`${r} is required.`:void 0;const i=typeof t=="number"?t:Number(t);return Number.isFinite(i)?void 0:`${r} must be a valid number.`}case"checkbox":return t==null?s?`${r} is required.`:void 0:typeof t!="boolean"?`${r} must be true or false.`:void 0;case"select":return at(t)?`${r} is required.`:typeof t!="string"?`${r} must be selected.`:e.options&&!e.options.includes(t)?`${r} must be one of ${e.options.join(", ")}.`:void 0;default:return}}function K(e,t,r,s,i){if(r)for(const a of t){if(a.sectionName)continue;const o=a.path??[],l=o.length?M(r,o):void 0,f=[...s,...o],y=Nn(a,l);if(y){e.push({path:f,message:y});continue}if(a.validate){const p=a.validate(l,i);p&&e.push({path:f,message:p})}}}function In(e){if(!e)return[];const t=[],r={root:e};K(t,Tt,e,[],r),K(t,wt,e,[],r),K(t,Et,e,[],r);for(const[s,i]of Object.entries(e)){if(!ze.test(s)||!i||typeof i!="object")continue;const a=i,o={root:e,section:a,sectionKey:s},l=Nt(s);K(t,l.generalFields,a,[s],o),K(t,l.entryFields,a,[s],o),K(t,l.entryOmbiFields,a,[s],o),K(t,l.entryOverseerrFields,a,[s],o),K(t,l.torrentFields,a,[s],o),K(t,l.seedingFields,a,[s],o)}return t}function M(e,t){if(e)return Rt(e,t)}function An(e,t,r){yn(e,t,r)}function re(e,t=[]){const r={};for(const[s,i]of Object.entries(e)){const a=[...t,s];i&&typeof i=="object"&&!Array.isArray(i)?Object.assign(r,re(i,a)):r[a.join(".")]=i}return r}function Cn(e){const t=e.toLowerCase(),r=t.includes("sonarr"),s=t.includes("radarr"),i=t.includes("lidarr"),a=s?["Not a preferred word upgrade for existing movie file(s)","Not an upgrade for existing movie file(s)","Unable to determine if file is a sample"]:i?["Not a preferred word upgrade for existing album file(s)","Not an upgrade for existing album file(s)","Unable to determine if file is a sample"]:["Not a preferred word upgrade for existing episode file(s)","Not an upgrade for existing episode file(s)","Unable to determine if file is a sample"],o={SearchMissing:!0,Unmonitored:!1,SearchLimit:5,SearchByYear:!0,SearchInReverse:!1,SearchRequestsEvery:300,DoUpgradeSearch:!1,QualityUnmetSearch:!1,CustomFormatUnmetSearch:!1,ForceMinimumCustomFormat:!1,SearchAgainOnSearchCompletion:!0,UseTempForMissing:!1,KeepTempProfile:!1,ForceResetTempProfiles:!1,TempProfileResetTimeoutMinutes:0,ProfileSwitchRetryAttempts:3,QualityProfileMappings:{}};return r&&(o.AlsoSearchSpecials=!1,o.SearchBySeries="smart",o.PrioritizeTodaysReleases=!0),o.Ombi={SearchOmbiRequests:!1,OmbiURI:"CHANGE_ME",OmbiAPIKey:"CHANGE_ME",ApprovedOnly:!0},o.Overseerr={SearchOverseerrRequests:!1,OverseerrURI:"CHANGE_ME",OverseerrAPIKey:"CHANGE_ME",ApprovedOnly:!0,Is4K:!1},{Managed:!0,URI:"CHANGE_ME",APIKey:"CHANGE_ME",Category:e,ReSearch:!0,importMode:"Auto",RssSyncTimer:5,RefreshDownloadsTimer:5,ArrErrorCodesToBlocklist:a,EntrySearch:o,Torrent:{CaseSensitiveMatches:!1,FolderExclusionRegex:["\\bextras?\\b","\\bfeaturettes?\\b","\\bsamples?\\b","\\bscreens?\\b","\\bnc(ed|op)?(\\\\d+)?\\b"],FileNameExclusionRegex:["\\bncop\\\\d+?\\b","\\bnced\\\\d+?\\b","\\bsample\\b","brarbg.com\\b","\\btrailer\\b","music video","comandotorrents.com"],FileExtensionAllowlist:i?[".mp3",".flac",".m4a",".aac",".ogg",".opus",".wav",".ape",".wma",".!qB",".parts",".log",".cue"]:[".mp4",".mkv",".sub",".ass",".srt",".!qB",".parts"],AutoDelete:!1,IgnoreTorrentsYoungerThan:600,MaximumETA:604800,MaximumDeletablePercentage:.99,DoNotRemoveSlow:!0,StalledDelay:15,ReSearchStalled:!1,RemoveDeadTrackers:!1,RemoveTrackerWithMessage:["skipping tracker announce (unreachable)","No such host is known","unsupported URL protocol","info hash is not authorized with this tracker"],SeedingMode:{DownloadRateLimitPerTorrent:-1,UploadRateLimitPerTorrent:-1,MaxUploadRatio:-1,MaxSeedingTime:-1,RemoveTorrent:-1}}}}function qn(e){const{onDirtyChange:t}=e??{},{push:r}=ot(),[s,i]=_.useState(null),[a,o]=_.useState(null),[l,f]=_.useState(!1),[y,p]=_.useState(!1),c=_.useCallback(async()=>{f(!0);try{const u=await Ct();i(u),o(u?JSON.parse(JSON.stringify(u)):null)}catch(u){r(u instanceof Error?u.message:"Failed to load configuration","error")}finally{f(!1)}},[r]);_.useEffect(()=>{c()},[c]);const T=_.useCallback((u,S,x)=>{if(!a)return;const v=S.parse?.(x)??(S.type==="number"?Number(x)||0:S.type==="checkbox"?!!x:x);o(de(a,j=>{An(j,u,v)}))},[a]),b=_.useMemo(()=>a?Object.entries(a).filter(([u,S])=>ze.test(u)&&S&&typeof S=="object"):[],[a]),w=_.useMemo(()=>{const u=[],S=[...b].sort((C,q)=>C[0].localeCompare(q[0],void 0,{numeric:!0,sensitivity:"base"})),x=[],v=[],j=[],F=[];for(const C of S){const[q]=C,P=q.toLowerCase();P.startsWith("radarr")?x.push(C):P.startsWith("sonarr")?v.push(C):P.startsWith("lidarr")?j.push(C):F.push(C)}return u.push({label:"Radarr Instances",type:"radarr",items:x}),u.push({label:"Sonarr Instances",type:"sonarr",items:v}),u.push({label:"Lidarr Instances",type:"lidarr",items:j}),F.length&&u.push({label:"Other Instances",type:"other",items:F}),u},[b]),[R,N]=_.useState(null),[E,g]=_.useState(!1),[A,m]=_.useState(!1),[d,h]=_.useState(!1),[I,k]=_.useState(!1);_.useEffect(()=>{if(!a||!s){k(!1);return}const u=re(s),S=re(a),x=new Set(["WebUI.LiveArr","WebUI.GroupSonarr","WebUI.GroupLidarr","WebUI.Theme"]);let v=!1;for(const[j,F]of Object.entries(S)){if(x.has(j))continue;const C=u[j];if(!Ze(F,C)){v=!0;break}}if(!v){for(const j of Object.keys(u))if(!x.has(j)&&!(j in S)){v=!0;break}}k(v)},[a,s]),_.useEffect(()=>{t?.(I)},[I,t]),_.useEffect(()=>{if(!I)return;const u=S=>{S.preventDefault(),S.returnValue=""};return window.addEventListener("beforeunload",u),()=>{window.removeEventListener("beforeunload",u)}},[I]),_.useEffect(()=>()=>{t?.(!1)},[t]),_.useEffect(()=>{if(!!!(R||E||A||d))return;const S=j=>{j.key==="Escape"&&(N(null),g(!1),h(!1))};window.addEventListener("keydown",S);const{style:x}=document.body,v=x.overflow;return x.overflow="hidden",()=>{window.removeEventListener("keydown",S),x.overflow=v}},[R,E,A,d]),_.useEffect(()=>{R&&(b.some(([u])=>u===R)||N(null))},[R,b]);const D=_.useCallback(u=>{if(!a)return;const S=u.charAt(0).toUpperCase()+u.slice(1);let x=1,v=`${S}-${x}`;for(;a[v];)x+=1,v=`${S}-${x}`;const j=Cn(u);j&&typeof j=="object"&&(j.Name=v),o(de(a,F=>{F[v]=j})),N(v)},[a]),le=_.useCallback(u=>{if(!a)return;const S=u.toLowerCase();!S.startsWith("radarr")&&!S.startsWith("sonarr")&&!S.startsWith("lidarr")||!window.confirm(`Delete ${u}? This action cannot be undone.`)||u in a&&(o(de(a,v=>{delete v[u]})),R===u&&N(null),r(`${u} removed`,"success"))},[a,R,r]),It=_.useCallback((u,S)=>{if(!a)return;const x=S.trim();if(!(!x||x===u)){if(a[x]){r(`An instance named "${x}" already exists`,"error");return}o(de(a,v=>{const j=v[u];delete v[u],v[x]=j,j&&typeof j=="object"&&(j.Name=x)})),R===u&&N(x)}},[a,r,R]),At=_.useCallback(async()=>{if(a){p(!0);try{const u=In(a);if(u.length){const P=u.map(ce=>`${ce.path.join(".")}: ${ce.message}`).join(`
`),X=u.length===1?P:`Please resolve the following issues:
${P}`;r(X,"error"),p(!1);return}const S=re(s??{}),x=re(a),v={};for(const[P,X]of Object.entries(x)){const ce=S[P];Ze(X,ce)||(v[P]=X)}for(const P of Object.keys(S))P in x||(v[P]=null);if(Object.keys(v).length===0){r("No changes detected","info"),p(!1);return}const{configReloaded:j,reloadType:F,affectedInstances:C}=await Pt({changes:v});let q="Configuration saved";if(F==="full"?q+=" • All instances reloaded":F==="multi_arr"&&C?.length?q+=` • Reloaded ${C.length} instances: ${C.join(", ")}`:F==="single_arr"&&C?.length?q+=` • Reloaded: ${C.join(", ")}`:F==="webui"?q+=" • WebUI restarting...":F==="frontend"&&(q+=" • Theme/display settings updated"),r(q,"success"),j&&"caches"in window)try{const P=await caches.keys();await Promise.all(P.map(X=>caches.delete(X)))}catch(P){console.warn("Failed to clear caches:",P)}await c()}catch(u){r(u instanceof Error?u.message:"Failed to update configuration","error")}finally{p(!1)}}},[a,s,c,r]);return l||!a?n.jsxs("section",{className:"card",children:[n.jsx("div",{className:"card-header",children:"Config"}),n.jsx("div",{className:"card-body",children:n.jsxs("div",{className:"loading",children:[n.jsx("span",{className:"spinner"})," Loading configuration…"]})})]}):n.jsxs(n.Fragment,{children:[n.jsxs("section",{className:"card",children:[n.jsx("div",{className:"card-header",children:"Config"}),n.jsxs("div",{className:"card-body config-layout",children:[n.jsx("section",{className:"config-arr-group",children:n.jsxs("details",{className:"config-arr-group__details",open:!0,children:[n.jsx("summary",{children:n.jsx("span",{children:"Core Configuration"})}),n.jsxs("div",{className:"config-grid",children:[n.jsx(Ee,{title:"Settings",description:"Core application configuration",onConfigure:()=>g(!0)}),n.jsx(Ee,{title:"Web Settings",description:"Web UI configuration",onConfigure:()=>m(!0)}),n.jsx(Ee,{title:"qBit",description:"qBittorrent connection details",onConfigure:()=>h(!0)})]})]})}),w.length?n.jsx("div",{className:"config-arr-groups",children:w.map(u=>n.jsx("section",{className:"config-arr-group",children:n.jsxs("details",{className:"config-arr-group__details",open:!0,children:[n.jsxs("summary",{children:[n.jsx("span",{children:u.label}),n.jsx("span",{className:"config-arr-group__count",children:u.items.length}),(u.type==="radarr"||u.type==="sonarr"||u.type==="lidarr")&&n.jsxs("button",{className:"btn small",type:"button",onClick:()=>D(u.type),children:[n.jsx(O,{src:ke}),"Add Instance"]})]}),n.jsx("div",{className:"config-arr-grid",children:u.items.map(([S,x])=>{const v=M(x,["URI"]),j=M(x,["Category"]),F=M(x,["Managed"]),C=u.type==="radarr"||u.type==="sonarr"||u.type==="lidarr";return n.jsxs("div",{className:"card config-card config-arr-card",children:[n.jsx("div",{className:"card-header",children:S}),n.jsxs("div",{className:"card-body",children:[n.jsxs("dl",{className:"config-arr-summary",children:[n.jsxs("div",{className:"config-arr-summary__item",children:[n.jsx("dt",{children:"Managed"}),n.jsx("dd",{children:F?"Enabled":"Disabled"})]}),n.jsxs("div",{className:"config-arr-summary__item",children:[n.jsx("dt",{children:"Category"}),n.jsx("dd",{children:j?String(j):"-"})]}),n.jsxs("div",{className:"config-arr-summary__item",children:[n.jsx("dt",{children:"URI"}),n.jsx("dd",{className:"config-arr-summary__uri",children:v?String(v):"-"})]})]}),n.jsxs("div",{className:"config-arr-actions",children:[C?n.jsxs("button",{className:"btn danger",type:"button",onClick:()=>le(S),children:[n.jsx(O,{src:Be}),"Delete"]}):null,n.jsxs("button",{className:"btn primary",type:"button",onClick:()=>N(S),children:[n.jsx(O,{src:lt}),"Configure"]})]})]})]},S)})})]})},u.type))}):null,n.jsx("div",{className:"config-footer",children:n.jsxs("button",{className:"btn primary",onClick:()=>void At(),disabled:y,children:[n.jsx(O,{src:Ke}),"Save + Live Reload"]})})]})]}),R&&a?n.jsx(kn,{keyName:R,state:a[R]??null,onChange:T,onRename:It,onClose:()=>N(null)}):null,E?n.jsx(Ne,{title:"Settings",fields:Tt,state:a,basePath:[],onChange:T,onClose:()=>g(!1)}):null,A?n.jsx(Ne,{title:"Web Settings",fields:wt,state:a,basePath:[],onChange:T,onClose:()=>m(!1),showLiveSettings:!0}):null,d?n.jsx(Ne,{title:"qBit",fields:Et,state:a,basePath:[],onChange:T,onClose:()=>h(!1)}):null]})}function Ee({title:e,description:t,onConfigure:r}){return n.jsxs("div",{className:"card config-card",children:[n.jsx("div",{className:"card-header",children:e}),n.jsxs("div",{className:"card-body config-summary-card",children:[n.jsx("p",{children:t}),n.jsx("div",{className:"config-arr-actions",children:n.jsxs("button",{className:"btn primary",type:"button",onClick:r,children:[n.jsx(O,{src:lt}),"Configure"]})})]})]})}function $({title:e,fields:t,state:r,basePath:s,onChange:i,onRenameSection:a,defaultOpen:o=!1,qualityProfiles:l=[],sectionKey:f}){const y=f??s[0]??"";if(e==="Quality Profile Mappings"){const c=M(r,["EntrySearch","QualityProfileMappings"])??{},T=Object.entries(c),b=!!(M(r,["URI"])&&M(r,["APIKey"])),w=l.length>0,R=()=>{const g={...c,"":""};i([...s,"EntrySearch","QualityProfileMappings"],{},g)},N=(g,A,m)=>{const d={...c};g!==A&&delete d[g],A.trim()&&(d[A.trim()]=m.trim()),i([...s,"EntrySearch","QualityProfileMappings"],{},d)},E=g=>{const A={...c};delete A[g],i([...s,"EntrySearch","QualityProfileMappings"],{},A)};return n.jsxs("details",{className:"config-section",open:o,children:[n.jsx("summary",{children:e}),n.jsxs("div",{className:"config-section__body",children:[n.jsx("div",{className:"field-description",style:{marginBottom:"1rem"},children:"Map main quality profile names to temporary profile names. Items will be downgraded to the temp profile when not found, then upgraded back to the main profile when available."}),b?w?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"profile-mappings-grid",children:T.map(([g,A],m)=>n.jsxs("div",{className:"profile-mapping-row",children:[n.jsxs("div",{className:"field",children:[n.jsx("label",{children:"Main Profile"}),n.jsx(ve,{options:l.map(d=>({value:d.name,label:d.name})),value:g?{value:g,label:g}:null,onChange:d=>N(g,d?.value||"",A),placeholder:"Select main profile...",isClearable:!0,styles:we(),classNamePrefix:"react-select"})]}),n.jsxs("div",{className:"field",children:[n.jsx("label",{children:"Temp Profile"}),n.jsx(ve,{options:l.map(d=>({value:d.name,label:d.name})),value:A?{value:A,label:A}:null,onChange:d=>N(g,g,d?.value||""),placeholder:"Select temp profile...",isClearable:!0,styles:we(),classNamePrefix:"react-select"})]}),n.jsx("button",{className:"btn ghost icon-only",type:"button",onClick:()=>E(g),title:"Delete mapping",children:n.jsx(O,{src:Be})})]},m))}),n.jsx("div",{className:"config-actions",children:n.jsxs("button",{className:"btn",type:"button",onClick:R,children:[n.jsx(O,{src:ke}),"Add Profile Mapping"]})})]}):n.jsxs("div",{className:"alert info",children:['ℹ️ Click "Test Connection" above to load quality profiles from your ',y," instance"]}):n.jsx("div",{className:"alert warning",children:'⚠️ Please configure URI and API Key first, then click "Test Connection" to load quality profiles'})]})]})}if(e==="Trackers"){const c=M(r,["Torrent","Trackers"])??[],T=()=>{const w=[...c,{Url:"",RemoveIfExists:!1,SuperSeedMode:!1,AddTags:[]}];i([...s,"Torrent","Trackers"],{},w)},b=w=>{const R=[...c];R.splice(w,1),i([...s,"Torrent","Trackers"],{},R)};return n.jsxs("details",{className:"config-section",open:o,children:[n.jsx("summary",{children:e}),n.jsxs("div",{className:"config-section__body",children:[n.jsx("div",{className:"tracker-grid",children:c.map((w,R)=>n.jsx(Pn,{fields:t,state:w,basePath:[...s,"Torrent","Trackers",String(R)],onChange:i,onDelete:()=>b(R)},R))}),n.jsx("div",{className:"config-actions",children:n.jsxs("button",{className:"btn",type:"button",onClick:T,children:[n.jsx(O,{src:ke}),"Add Tracker"]})})]})]})}const p=t.map(c=>{if(c.sectionName){if(!y)return null;const h=it([y]);let I;return y.startsWith("Radarr")?I="Radarr":y.startsWith("Sonarr")?I="Sonarr":y.startsWith("Lidarr")&&(I="Lidarr"),n.jsx(On,{label:c.label,tooltip:h,currentName:y,placeholder:c.placeholder,expectedPrefix:I,onRename:k=>a?.(y,k)},`${y}.__name`)}const T=c.path??[],b=[...s,...T],w=b.join("."),R=b.length>0?M(r,b):void 0,N=c.format?.(R)??(c.type==="checkbox"?!!R:String(R??"")),E=it(b),g=c.description??jt(E)??(c.type==="checkbox"?`Enable or disable ${c.label}.`:`Set the ${c.label} value.`),m=s.length>0&&ze.test(s[0]??"")&&(c.path?.[c.path.length-1]??"")==="APIKey",d=c.fullWidth?"field field--full-width":"field";if(c.secure)return n.jsx(Fn,{label:c.label,tooltip:E,description:g,value:String(R??""),placeholder:c.placeholder,canRefresh:!m,onChange:h=>i(b,c,h)},w);if(c.type==="checkbox")return n.jsxs("div",{className:"checkbox-field",children:[n.jsxs("label",{title:E,children:[n.jsx("input",{type:"checkbox",checked:!!N,onChange:h=>i(b,c,h.target.checked)}),c.label]}),g&&n.jsx("div",{className:"field-description",children:g})]},w);if(c.type==="select"){const h=c.label==="Theme"&&b.join(".")==="WebUI.Theme";let I=N;if(h&&typeof N=="string"){const k=N.toLowerCase();k==="light"?I="Light":I="Dark"}return n.jsxs("div",{className:d,children:[n.jsx("label",{title:E,children:c.label}),n.jsx(ve,{options:(c.options??[]).map(k=>({value:k,label:k})),value:I?{value:I,label:I}:null,onChange:k=>{const D=k?.value||"";if(i(b,c,D),h&&typeof D=="string"&&D){const le=D.toLowerCase();document.documentElement.setAttribute("data-theme",le),localStorage.setItem("theme",le)}},styles:we()}),g&&n.jsx("div",{className:"field-description",children:g}),h&&n.jsx("div",{className:"field-hint",children:"Theme changes apply immediately"})]},w)}return c.type==="number"?n.jsxs("div",{className:d,children:[n.jsx("label",{title:E,children:c.label}),n.jsx("input",{type:"number",value:Number(N)||0,onChange:h=>i(b,c,String(h.target.value)),placeholder:c.placeholder}),g&&n.jsx("div",{className:"field-description",children:g})]},w):c.type==="password"?n.jsxs("div",{className:d,children:[n.jsx("label",{title:E,children:c.label}),n.jsx("input",{type:"password",value:String(N),onChange:h=>i(b,c,h.target.value),placeholder:c.placeholder}),g&&n.jsx("div",{className:"field-description",children:g})]},w):n.jsxs("div",{className:d,children:[n.jsx("label",{title:E,children:c.label}),n.jsx("input",{type:"text",value:String(N),onChange:h=>i(b,c,h.target.value),placeholder:c.placeholder}),g&&n.jsx("div",{className:"field-description",children:g})]},w)});return e?n.jsxs("details",{className:"config-section",open:o,children:[n.jsx("summary",{children:e}),n.jsx("div",{className:"config-section__body field-grid",children:p})]}):n.jsx("div",{className:"field-grid",children:p})}function Pn({fields:e,state:t,basePath:r,onChange:s,onDelete:i}){const a=M(t,["Name"])||"New Tracker";return n.jsxs("details",{className:"card tracker-card",open:!0,children:[n.jsxs("summary",{className:"card-header",children:[n.jsx("span",{children:a}),n.jsx("button",{className:"btn danger ghost",type:"button",onClick:i,children:n.jsx(O,{src:Be})})]}),n.jsx("div",{className:"card-body",children:n.jsx($,{title:null,fields:e,state:t,basePath:r,onChange:s})})]})}function On({label:e,currentName:t,placeholder:r,tooltip:s,expectedPrefix:i,onRename:a}){const[o,l]=_.useState(t),f=jt(s)??`Rename the ${t} instance.`;_.useEffect(()=>{l(t)},[t]);const y=()=>{const p=o.trim();if(!p){l(t);return}let c=p;if(i&&!p.startsWith(i)&&(c=i+(p.startsWith("-")?p:`-${p}`)),!/^(Radarr|Sonarr|Lidarr)-.+$/.test(c)){alert(`Instance name must match format: ${i||"(Rad|Son|Lid)arr"}-(name)
Example: ${i||"Radarr"}-Movies`),l(t);return}c!==t?a(c):l(t)};return n.jsxs("div",{className:"field",children:[n.jsxs("label",{className:"field-label",children:[n.jsx("span",{children:e}),s?n.jsx("span",{className:"help-icon",title:s,"aria-label":s,children:"?"}):null]}),f?n.jsx("p",{className:"field-description",children:f}):null,n.jsx("input",{type:"text",value:o,placeholder:r,onChange:p=>l(p.target.value),onBlur:y,onKeyDown:p=>{p.key==="Enter"?(p.preventDefault(),y()):p.key==="Escape"&&(p.preventDefault(),l(t))}})]})}function Fn({label:e,value:t,placeholder:r,tooltip:s,description:i,canRefresh:a=!0,onChange:o}){const[l,f]=_.useState(!1),y=()=>{let p="";typeof crypto<"u"&&typeof crypto.randomUUID=="function"?p=crypto.randomUUID().replace(/-/g,""):p=Array.from({length:32},()=>Math.floor(Math.random()*16).toString(16)).join(""),o(p)};return n.jsxs("div",{className:"field secure-field",children:[n.jsx("label",{title:s,children:e}),n.jsxs("div",{className:"secure-field__input-group",children:[n.jsx("input",{type:l?"text":"password",value:t,placeholder:r,onChange:p=>o(p.target.value)}),n.jsx("button",{type:"button",className:"btn ghost",onClick:()=>f(!l),children:n.jsx(O,{src:gn})}),a&&n.jsx("button",{type:"button",className:"btn ghost",onClick:y,children:n.jsx(O,{src:ut})})]}),i&&n.jsx("div",{className:"field-description",children:i})]})}function kn({keyName:e,state:t,onChange:r,onRename:s,onClose:i}){const{generalFields:a,entryFields:o,entryOmbiFields:l,entryOverseerrFields:f,torrentFields:y,seedingFields:p,trackerFields:c}=Nt(e),{push:T}=ot(),[b,w]=_.useState({testing:!1,result:null}),[R,N]=_.useState([]),E=m=>{if(t)return Rt(t,m)};_.useEffect(()=>{w({testing:!1,result:null}),N([])},[E(["URI"]),E(["APIKey"])]),_.useEffect(()=>{const m=E(["URI"]),d=E(["APIKey"]);m&&d&&!b.testing&&!b.result&&g(!0)},[]);const g=async(m=!1)=>{const d=E(["URI"]),h=E(["APIKey"]),I=e.toLowerCase(),k=I.includes("radarr")?"radarr":I.includes("sonarr")?"sonarr":"lidarr";if(!d||!h)return m||T("Please configure URI and API Key first","error"),!1;w({testing:!0,result:null});try{const D=await Ot({arrType:k,uri:d,apiKey:h});return w({testing:!1,result:D}),D.success?(D.qualityProfiles&&N(D.qualityProfiles),m||T(`Connected to ${e} successfully!`,"success"),!0):(m||T(`Connection failed: ${D.message}`,"error"),!1)}catch{return w({testing:!1,result:null}),m||T("Test connection failed","error"),!1}},A=async()=>{const m=E(["URI"]),d=E(["APIKey"]);m&&d?await g(!1)&&(T("Configuration saved successfully","success"),i()):i()};return n.jsx("div",{className:"modal-backdrop",role:"presentation",onClick:i,children:n.jsxs("div",{className:"modal",role:"dialog","aria-modal":"true","aria-labelledby":"arr-instance-modal-title",onClick:m=>m.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsxs("h2",{id:"arr-instance-modal-title",children:["Configure ",n.jsx("code",{children:e})]}),n.jsxs("button",{className:"btn ghost",type:"button",onClick:i,children:[n.jsx(O,{src:ct}),"Close"]})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx($,{title:null,fields:a,state:t,basePath:[],onChange:(m,d,h)=>r([e,...m],d,h),onRenameSection:s,sectionKey:e,defaultOpen:!0}),b.result&&n.jsx("div",{className:`alert ${b.result.success?"success":"error"}`,style:{margin:"16px 0"},children:b.result.success?n.jsxs(n.Fragment,{children:[n.jsxs("strong",{children:["✓ ",b.result.message]}),b.result.systemInfo&&n.jsxs("div",{className:"alert-details",children:["Version: ",b.result.systemInfo.version,b.result.systemInfo.branch&&` (${b.result.systemInfo.branch})`]}),b.result.qualityProfiles&&n.jsxs("div",{className:"alert-details",children:["Found ",b.result.qualityProfiles.length," quality profile(s)"]})]}):n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:"⚠️ Connection Failed"}),n.jsx("br",{}),b.result.message]})}),n.jsx($,{title:"Entry Search",fields:o,state:t,basePath:[],onChange:(m,d,h)=>r([e,...m],d,h),sectionKey:e,defaultOpen:!0}),n.jsx($,{title:"Quality Profile Mappings",fields:[],state:t,basePath:[],onChange:(m,d,h)=>r([e,...m],d,h),sectionKey:e,defaultOpen:!0,qualityProfiles:R}),l.length>0&&n.jsx($,{title:"Ombi Integration",fields:l,state:t,basePath:[],onChange:(m,d,h)=>r([e,...m],d,h),sectionKey:e}),f.length>0&&n.jsx($,{title:"Overseerr Integration",fields:f,state:t,basePath:[],onChange:(m,d,h)=>r([e,...m],d,h),sectionKey:e}),n.jsx($,{title:"Torrent Handling",fields:y,state:t,basePath:[],onChange:(m,d,h)=>r([e,...m],d,h),sectionKey:e}),n.jsx($,{title:"Seeding",fields:p,state:t,basePath:[],onChange:(m,d,h)=>r([e,...m],d,h),sectionKey:e}),n.jsx($,{title:"Trackers",fields:c,state:t,basePath:[],onChange:(m,d,h)=>r([e,...m],d,h),sectionKey:e})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn secondary",type:"button",onClick:()=>g(!1),disabled:b.testing,children:b.testing?n.jsxs(n.Fragment,{children:[n.jsx(O,{src:ut}),"Testing..."]}):"Test"}),n.jsxs("button",{className:"btn primary",type:"button",onClick:A,children:[n.jsx(O,{src:Ke}),"Save"]})]})]})})}function Ne({title:e,fields:t,state:r,basePath:s,onChange:i,onClose:a,showLiveSettings:o=!1}){const l=Ft();return r?n.jsx("div",{className:"modal-backdrop",role:"presentation",onClick:a,children:n.jsxs("div",{className:"modal",role:"dialog","aria-modal":"true","aria-labelledby":`${e}-modal-title`,onClick:f=>f.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{id:`${e}-modal-title`,children:e}),n.jsxs("button",{className:"btn ghost",type:"button",onClick:a,children:[n.jsx(O,{src:ct}),"Close"]})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx($,{title:null,fields:t,state:r,basePath:s,onChange:i,defaultOpen:!0}),o&&l&&n.jsxs("div",{className:"field-group",children:[n.jsx("h3",{className:"field-group-title",children:"Live Settings"}),n.jsxs("div",{className:"field-group-content",children:[n.jsxs("div",{className:"field",children:[n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:l.liveArr,onChange:f=>l.setLiveArr(f.target.checked)})," ","Live Arr Updates"]}),n.jsx("p",{className:"field-description",children:"Enable real-time updates for Arr views"})]}),n.jsxs("div",{className:"field",children:[n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:l.groupSonarr,onChange:f=>l.setGroupSonarr(f.target.checked)})," ","Group Sonarr by Series"]}),n.jsx("p",{className:"field-description",children:"Group Sonarr episodes by series in views"})]}),n.jsxs("div",{className:"field",children:[n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:l.groupLidarr,onChange:f=>l.setGroupLidarr(f.target.checked)})," ","Group Lidarr by Artist"]}),n.jsx("p",{className:"field-description",children:"Group Lidarr albums by artist in views"})]}),n.jsxs("div",{className:"field",children:[n.jsx("label",{children:"Theme"}),n.jsxs("select",{value:l.theme,onChange:f=>l.setTheme(f.target.value),children:[n.jsx("option",{value:"dark",children:"Dark"}),n.jsx("option",{value:"light",children:"Light"})]}),n.jsx("p",{className:"field-description",children:"WebUI theme (Light or Dark)"})]})]})]})]}),n.jsx("div",{className:"modal-footer",children:n.jsxs("button",{className:"btn primary",type:"button",onClick:a,children:[n.jsx(O,{src:Ke}),"Done"]})})]})}):null}export{qn as ConfigView};
//# sourceMappingURL=ConfigView.js.map
