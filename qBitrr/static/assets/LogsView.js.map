{"version":3,"file":"LogsView.js","sources":["../../../webui/src/icons/download.svg","../../../webui/src/icons/live-streaming.svg","../../../webui/src/pages/LogsView.tsx"],"sourcesContent":["export default \"__VITE_ASSET__Dd3tjKzy__\"","export default \"__VITE_ASSET__Cfa$Ken8__\"","import { useCallback, useEffect, useRef, useState, type JSX } from \"react\";\nimport { getLogDownloadUrl, getLogTail, getLogs } from \"../api/client\";\nimport { useToast } from \"../context/ToastContext\";\nimport { useInterval } from \"../hooks/useInterval\";\nimport { IconImage } from \"../components/IconImage\";\nimport Select, { type CSSObjectWithLabel, type OptionProps, type StylesConfig } from \"react-select\";\n\ninterface LogOption {\n  value: string;\n  label: string;\n}\n\n// Helper function for react-select theme-aware styles\nconst getSelectStyles = (): StylesConfig<LogOption, false> => {\n  const isDark = document.documentElement.getAttribute('data-theme') === 'dark';\n  return {\n    control: (base: CSSObjectWithLabel) => ({\n      ...base,\n      background: isDark ? '#0f131a' : '#ffffff',\n      color: isDark ? '#eaeef2' : '#1d1d1f',\n      borderColor: isDark ? '#2a2f36' : '#d2d2d7',\n      minHeight: '38px',\n      boxShadow: 'none',\n      '&:hover': {\n        borderColor: isDark ? '#3a4149' : '#b8b8bd',\n      }\n    }),\n    menu: (base: CSSObjectWithLabel) => ({\n      ...base,\n      background: isDark ? '#0f131a' : '#ffffff',\n      borderColor: isDark ? '#2a2f36' : '#d2d2d7',\n      border: `1px solid ${isDark ? '#2a2f36' : '#d2d2d7'}`,\n    }),\n    option: (base: CSSObjectWithLabel, state: OptionProps<LogOption, false>) => ({\n      ...base,\n      background: state.isFocused\n        ? (isDark ? 'rgba(122, 162, 247, 0.15)' : 'rgba(0, 113, 227, 0.1)')\n        : (isDark ? '#0f131a' : '#ffffff'),\n      color: isDark ? '#eaeef2' : '#1d1d1f',\n      '&:active': {\n        background: isDark ? 'rgba(122, 162, 247, 0.25)' : 'rgba(0, 113, 227, 0.2)',\n      }\n    }),\n    singleValue: (base: CSSObjectWithLabel) => ({\n      ...base,\n      color: isDark ? '#eaeef2' : '#1d1d1f',\n    }),\n    input: (base: CSSObjectWithLabel) => ({\n      ...base,\n      color: isDark ? '#eaeef2' : '#1d1d1f',\n    }),\n    placeholder: (base: CSSObjectWithLabel) => ({\n      ...base,\n      color: isDark ? '#9aa3ac' : '#6e6e73',\n    }),\n    menuList: (base: CSSObjectWithLabel) => ({\n      ...base,\n      padding: '4px',\n    }),\n  };\n};\n\nfunction ansiToHtml(text: string): string {\n  // Enhanced ANSI to HTML converter with full TTY support\n  const fgColorMap: Record<string, string> = {\n    '30': '#000000', '31': '#cd3131', '32': '#0dbc79', '33': '#e5e510',\n    '34': '#2472c8', '35': '#bc3fbc', '36': '#11a8cd', '37': '#e5e5e5',\n    '90': '#666666', '91': '#f14c4c', '92': '#23d18b', '93': '#f5f543',\n    '94': '#3b8eea', '95': '#d670d6', '96': '#29b8db', '97': '#ffffff',\n  };\n\n  const bgColorMap: Record<string, string> = {\n    '40': '#000000', '41': '#cd3131', '42': '#0dbc79', '43': '#e5e510',\n    '44': '#2472c8', '45': '#bc3fbc', '46': '#11a8cd', '47': '#e5e5e5',\n    '100': '#666666', '101': '#f14c4c', '102': '#23d18b', '103': '#f5f543',\n    '104': '#3b8eea', '105': '#d670d6', '106': '#29b8db', '107': '#ffffff',\n  };\n\n  let result = text;\n  let styles: string[] = [];\n\n  // Replace ANSI sequences with HTML\n  // eslint-disable-next-line no-control-regex\n  result = result.replace(/\\u001b\\[([0-9;]+)m/g, (match, codes) => {\n    const codeList = codes.split(';');\n    let html = '';\n\n    for (const code of codeList) {\n      if (code === '0' || code === '') {\n        // Reset all styles\n        html += '</span>'.repeat(styles.length);\n        styles = [];\n      } else if (code === '1') {\n        // Bold\n        styles.push('font-weight:bold');\n        html += `<span style=\"${styles.join(';')}\">`;\n      } else if (code === '3') {\n        // Italic\n        styles.push('font-style:italic');\n        html += `<span style=\"${styles.join(';')}\">`;\n      } else if (code === '4') {\n        // Underline\n        styles.push('text-decoration:underline');\n        html += `<span style=\"${styles.join(';')}\">`;\n      } else if (code === '22') {\n        // Normal intensity\n        styles = styles.filter(s => !s.includes('font-weight'));\n      } else if (code === '23') {\n        // Not italic\n        styles = styles.filter(s => !s.includes('font-style'));\n      } else if (code === '24') {\n        // Not underlined\n        styles = styles.filter(s => !s.includes('text-decoration'));\n      } else if (fgColorMap[code]) {\n        // Foreground color\n        styles = styles.filter(s => !s.startsWith('color:'));\n        styles.push(`color:${fgColorMap[code]}`);\n        html += `<span style=\"${styles.join(';')}\">`;\n      } else if (bgColorMap[code]) {\n        // Background color\n        styles = styles.filter(s => !s.startsWith('background-color:'));\n        styles.push(`background-color:${bgColorMap[code]}`);\n        html += `<span style=\"${styles.join(';')}\">`;\n      } else if (code === '39') {\n        // Default foreground color\n        styles = styles.filter(s => !s.startsWith('color:'));\n      } else if (code === '49') {\n        // Default background color\n        styles = styles.filter(s => !s.startsWith('background-color:'));\n      }\n    }\n\n    return html;\n  });\n\n  // Close any remaining open spans\n  result += '</span>'.repeat(styles.length);\n\n  // Convert newlines to <br> tags\n  result = result.replace(/\\n/g, '<br>');\n\n  return result;\n}\n\nimport RefreshIcon from \"../icons/refresh-arrow.svg\";\nimport DownloadIcon from \"../icons/download.svg\";\nimport LiveIcon from \"../icons/live-streaming.svg\";\n\ninterface LogsViewProps {\n  active: boolean;\n}\n\nexport function LogsView({ active }: LogsViewProps): JSX.Element {\n  const [files, setFiles] = useState<string[]>([]);\n  const [selected, setSelected] = useState<string>(\"Main.log\");\n  const [content, setContent] = useState(\"\");\n  const [autoScroll, setAutoScroll] = useState(true);\n  const [loadingList, setLoadingList] = useState(false);\n  const [loadingContent, setLoadingContent] = useState(false);\n  const logRef = useRef<HTMLDivElement | null>(null);\n  const preRef = useRef<HTMLPreElement | null>(null);\n  const bottomMarkerRef = useRef<HTMLDivElement | null>(null);\n  const { push } = useToast();\n\n  const describeError = useCallback((reason: unknown, context: string): string => {\n    if (reason instanceof Error && reason.message) {\n      return `${context}: ${reason.message}`;\n    }\n    if (typeof reason === \"string\" && reason.trim().length) {\n      return `${context}: ${reason}`;\n    }\n    return context;\n  }, []);\n\n\n\n  const loadList = useCallback(async () => {\n    setLoadingList(true);\n    try {\n      const data = await getLogs();\n      const list = data.files ?? [];\n      setFiles(list);\n      if (list.length) {\n        setSelected((prev) => {\n          if (prev && list.includes(prev)) {\n            return prev;\n          }\n          const mainLog =\n            list.find((file) => file.toLowerCase() === \"main.log\") ?? null;\n          return mainLog ?? list[0];\n        });\n      } else {\n        setSelected(\"\");\n      }\n    } catch (error) {\n      push(describeError(error, \"Failed to refresh log list\"), \"error\");\n    } finally {\n      setLoadingList(false);\n    }\n  }, [describeError, push]);\n\n  const loadTail = useCallback(\n    async (name: string, showLoading: boolean = false) => {\n      if (!name) return;\n      if (showLoading) setLoadingContent(true);\n      try {\n        const text = await getLogTail(name);\n        setContent(text);\n      } catch (error) {\n        push(describeError(error, `Failed to read ${name}`), \"error\");\n      } finally {\n        if (showLoading) setLoadingContent(false);\n      }\n    },\n    [describeError, push]\n  );\n\n  // Auto-scroll to bottom when content changes and autoscroll is enabled\n  useEffect(() => {\n    if (!autoScroll || !content || !logRef.current) return;\n\n    const element = logRef.current;\n\n    const scrollToBottom = () => {\n      const before = {\n        scrollTop: element.scrollTop,\n        scrollHeight: element.scrollHeight,\n        clientHeight: element.clientHeight\n      };\n\n      // Set scroll to maximum possible value\n      element.scrollTop = element.scrollHeight;\n\n      const after = {\n        scrollTop: element.scrollTop,\n        scrollHeight: element.scrollHeight,\n        clientHeight: element.clientHeight\n      };\n\n      console.log('[LogsView] Scroll attempt:', {\n        before,\n        after,\n        changed: before.scrollTop !== after.scrollTop\n      });\n    };\n\n    // Use longer delays to ensure the dangerouslySetInnerHTML has fully rendered\n    // The ANSI conversion creates complex nested HTML that takes time to layout\n    const timeouts: number[] = [];\n\n    // Try at multiple increasing intervals\n    [0, 50, 100, 200, 300, 500, 1000].forEach(delay => {\n      timeouts.push(window.setTimeout(scrollToBottom, delay));\n    });\n\n    // Also use RAF for immediate attempts\n    requestAnimationFrame(scrollToBottom);\n    requestAnimationFrame(() => {\n      requestAnimationFrame(scrollToBottom);\n    });\n\n    return () => {\n      timeouts.forEach(t => window.clearTimeout(t));\n    };\n  }, [content, autoScroll]);\n\n  // Handle user scroll - disable autoscroll if user scrolls up manually\n  useEffect(() => {\n    const logElement = logRef.current;\n    if (!logElement) return;\n\n    let lastKnownScrollTop = logElement.scrollTop;\n\n    const handleScroll = () => {\n      const { scrollTop, scrollHeight, clientHeight } = logElement;\n      const isNearBottom = scrollHeight - scrollTop - clientHeight < 50;\n\n      // Only disable autoscroll if user manually scrolls up (not down)\n      if (scrollTop < lastKnownScrollTop && !isNearBottom) {\n        setAutoScroll(false);\n      }\n\n      lastKnownScrollTop = scrollTop;\n    };\n\n    logElement.addEventListener('scroll', handleScroll, { passive: true });\n    return () => {\n      logElement.removeEventListener('scroll', handleScroll);\n    };\n  }, []);\n\n  useEffect(() => {\n    void loadList();\n  }, [loadList]);\n\n  useEffect(() => {\n    if (selected) {\n      void loadTail(selected, true);\n    }\n  }, [selected, loadTail]);\n\n  useInterval(\n    () => {\n      if (selected) {\n        void loadTail(selected, false);\n      }\n    },\n    active ? 2000 : null\n  );\n\n\n\n  return (\n    <section className=\"card\" style={{ height: 'calc(100vh - 140px)', display: 'flex', flexDirection: 'column', margin: 0, padding: 0 }}>\n      <div className=\"card-header\" style={{ flexShrink: 0 }}>Logs</div>\n      <div className=\"card-body\" style={{ flex: 1, display: 'flex', flexDirection: 'column', overflow: 'hidden', padding: '12px' }}>\n        <div className=\"row\" style={{ flexShrink: 0, marginBottom: '12px' }}>\n          <div className=\"col field\">\n            <div className=\"field\">\n              <label>Log File</label>\n              <Select\n                options={files.map(f => ({ value: f, label: f }))}\n                value={selected ? { value: selected, label: selected } : null}\n                onChange={(option) => setSelected(option?.value || \"\")}\n                isDisabled={!files.length}\n                styles={getSelectStyles()}\n              />\n            </div>\n          </div>\n          <div className=\"col field\">\n            <label>&nbsp;</label>\n            <div className=\"row\" style={{ alignItems: \"center\" }}>\n              <button className=\"btn ghost\" onClick={() => void loadList()} disabled={loadingList}>\n                <IconImage src={RefreshIcon} />\n                Reload List\n              </button>\n              <button\n                className=\"btn\"\n                onClick={() =>\n                  selected && window.open(getLogDownloadUrl(selected), \"_blank\")\n                }\n                disabled={!selected}\n              >\n                <IconImage src={DownloadIcon} />\n                Download\n              </button>\n              <label className=\"hint inline\" style={{ cursor: \"pointer\" }}>\n                <input\n                  type=\"checkbox\"\n                  checked={autoScroll}\n                  onChange={(event) => setAutoScroll(event.target.checked)}\n                />\n                <IconImage src={LiveIcon} />\n                <span>Auto-scroll</span>\n              </label>\n            </div>\n          </div>\n        </div>\n        <div ref={logRef} style={{\n          flex: 1,\n          minHeight: 0,\n          overflow: 'auto',\n          backgroundColor: '#0a0e14',\n          borderRadius: '4px',\n          padding: '16px'\n        }}>\n          {loadingContent ? (\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '100%', color: '#666' }}>\n              <span className=\"spinner\" style={{ marginRight: '8px' }} />\n              Loading logs...\n            </div>\n          ) : content ? (\n            <>\n              <pre\n                ref={preRef}\n                style={{\n                  margin: 0,\n                  whiteSpace: 'pre-wrap',\n                  fontFamily: '\"Cascadia Code\", \"Fira Code\", \"Consolas\", \"Monaco\", monospace',\n                  fontSize: '13px',\n                  lineHeight: '1.5',\n                  color: '#e5e5e5',\n                  tabSize: 4,\n                  minHeight: '100%'\n                }}\n                dangerouslySetInnerHTML={{ __html: ansiToHtml(content) }}\n              />\n              <div ref={bottomMarkerRef} style={{ height: '1px', width: '1px' }} />\n            </>\n          ) : (\n            <div style={{ color: '#666' }}>Select a log file to view its tail...</div>\n          )}\n        </div>\n      </div>\n    </section>\n  );\n}\n"],"names":["DownloadIcon","LiveIcon","getSelectStyles","isDark","base","state","ansiToHtml","text","fgColorMap","bgColorMap","result","styles","match","codes","codeList","html","code","s","LogsView","active","files","setFiles","useState","selected","setSelected","content","setContent","autoScroll","setAutoScroll","loadingList","setLoadingList","loadingContent","setLoadingContent","logRef","useRef","preRef","bottomMarkerRef","push","useToast","describeError","useCallback","reason","context","loadList","list","getLogs","prev","file","error","loadTail","name","showLoading","getLogTail","useEffect","element","scrollToBottom","before","after","timeouts","delay","t","logElement","lastKnownScrollTop","handleScroll","scrollTop","scrollHeight","clientHeight","isNearBottom","useInterval","jsx","jsxs","Select","f","option","IconImage","RefreshIcon","getLogDownloadUrl","event","Fragment"],"mappings":"yMAAA,MAAAA,EAAe,8BCAfC,EAAe,oCCaTC,EAAkB,IAAsC,CAC5D,MAAMC,EAAS,SAAS,gBAAgB,aAAa,YAAY,IAAM,OACvE,MAAO,CACL,QAAUC,IAA8B,CACtC,GAAGA,EACH,WAAYD,EAAS,UAAY,UACjC,MAAOA,EAAS,UAAY,UAC5B,YAAaA,EAAS,UAAY,UAClC,UAAW,OACX,UAAW,OACX,UAAW,CACT,YAAaA,EAAS,UAAY,SAAA,CACpC,GAEF,KAAOC,IAA8B,CACnC,GAAGA,EACH,WAAYD,EAAS,UAAY,UACjC,YAAaA,EAAS,UAAY,UAClC,OAAQ,aAAaA,EAAS,UAAY,SAAS,EAAA,GAErD,OAAQ,CAACC,EAA0BC,KAA0C,CAC3E,GAAGD,EACH,WAAYC,EAAM,UACbF,EAAS,4BAA8B,yBACvCA,EAAS,UAAY,UAC1B,MAAOA,EAAS,UAAY,UAC5B,WAAY,CACV,WAAYA,EAAS,4BAA8B,wBAAA,CACrD,GAEF,YAAcC,IAA8B,CAC1C,GAAGA,EACH,MAAOD,EAAS,UAAY,SAAA,GAE9B,MAAQC,IAA8B,CACpC,GAAGA,EACH,MAAOD,EAAS,UAAY,SAAA,GAE9B,YAAcC,IAA8B,CAC1C,GAAGA,EACH,MAAOD,EAAS,UAAY,SAAA,GAE9B,SAAWC,IAA8B,CACvC,GAAGA,EACH,QAAS,KAAA,EACX,CAEJ,EAEA,SAASE,EAAWC,EAAsB,CAExC,MAAMC,EAAqC,CACzC,GAAM,UAAW,GAAM,UAAW,GAAM,UAAW,GAAM,UACzD,GAAM,UAAW,GAAM,UAAW,GAAM,UAAW,GAAM,UACzD,GAAM,UAAW,GAAM,UAAW,GAAM,UAAW,GAAM,UACzD,GAAM,UAAW,GAAM,UAAW,GAAM,UAAW,GAAM,SAAA,EAGrDC,EAAqC,CACzC,GAAM,UAAW,GAAM,UAAW,GAAM,UAAW,GAAM,UACzD,GAAM,UAAW,GAAM,UAAW,GAAM,UAAW,GAAM,UACzD,IAAO,UAAW,IAAO,UAAW,IAAO,UAAW,IAAO,UAC7D,IAAO,UAAW,IAAO,UAAW,IAAO,UAAW,IAAO,SAAA,EAG/D,IAAIC,EAASH,EACTI,EAAmB,CAAA,EAIvB,OAAAD,EAASA,EAAO,QAAQ,sBAAuB,CAACE,EAAOC,IAAU,CAC/D,MAAMC,EAAWD,EAAM,MAAM,GAAG,EAChC,IAAIE,EAAO,GAEX,UAAWC,KAAQF,EACbE,IAAS,KAAOA,IAAS,IAE3BD,GAAQ,UAAU,OAAOJ,EAAO,MAAM,EACtCA,EAAS,CAAA,GACAK,IAAS,KAElBL,EAAO,KAAK,kBAAkB,EAC9BI,GAAQ,gBAAgBJ,EAAO,KAAK,GAAG,CAAC,MAC/BK,IAAS,KAElBL,EAAO,KAAK,mBAAmB,EAC/BI,GAAQ,gBAAgBJ,EAAO,KAAK,GAAG,CAAC,MAC/BK,IAAS,KAElBL,EAAO,KAAK,2BAA2B,EACvCI,GAAQ,gBAAgBJ,EAAO,KAAK,GAAG,CAAC,MAC/BK,IAAS,KAElBL,EAASA,EAAO,OAAOM,GAAK,CAACA,EAAE,SAAS,aAAa,CAAC,EAC7CD,IAAS,KAElBL,EAASA,EAAO,OAAOM,GAAK,CAACA,EAAE,SAAS,YAAY,CAAC,EAC5CD,IAAS,KAElBL,EAASA,EAAO,OAAOM,GAAK,CAACA,EAAE,SAAS,iBAAiB,CAAC,EACjDT,EAAWQ,CAAI,GAExBL,EAASA,EAAO,OAAOM,GAAK,CAACA,EAAE,WAAW,QAAQ,CAAC,EACnDN,EAAO,KAAK,SAASH,EAAWQ,CAAI,CAAC,EAAE,EACvCD,GAAQ,gBAAgBJ,EAAO,KAAK,GAAG,CAAC,MAC/BF,EAAWO,CAAI,GAExBL,EAASA,EAAO,OAAOM,GAAK,CAACA,EAAE,WAAW,mBAAmB,CAAC,EAC9DN,EAAO,KAAK,oBAAoBF,EAAWO,CAAI,CAAC,EAAE,EAClDD,GAAQ,gBAAgBJ,EAAO,KAAK,GAAG,CAAC,MAC/BK,IAAS,KAElBL,EAASA,EAAO,OAAOM,GAAK,CAACA,EAAE,WAAW,QAAQ,CAAC,EAC1CD,IAAS,OAElBL,EAASA,EAAO,OAAOM,GAAK,CAACA,EAAE,WAAW,mBAAmB,CAAC,GAIlE,OAAOF,CACT,CAAC,EAGDL,GAAU,UAAU,OAAOC,EAAO,MAAM,EAGxCD,EAASA,EAAO,QAAQ,MAAO,MAAM,EAE9BA,CACT,CAUO,SAASQ,EAAS,CAAE,OAAAC,GAAsC,CAC/D,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAmB,CAAA,CAAE,EACzC,CAACC,EAAUC,CAAW,EAAIF,EAAAA,SAAiB,UAAU,EACrD,CAACG,EAASC,CAAU,EAAIJ,EAAAA,SAAS,EAAE,EACnC,CAACK,EAAYC,CAAa,EAAIN,EAAAA,SAAS,EAAI,EAC3C,CAACO,EAAaC,CAAc,EAAIR,EAAAA,SAAS,EAAK,EAC9C,CAACS,EAAgBC,CAAiB,EAAIV,EAAAA,SAAS,EAAK,EACpDW,EAASC,EAAAA,OAA8B,IAAI,EAC3CC,EAASD,EAAAA,OAA8B,IAAI,EAC3CE,EAAkBF,EAAAA,OAA8B,IAAI,EACpD,CAAE,KAAAG,CAAA,EAASC,EAAA,EAEXC,EAAgBC,EAAAA,YAAY,CAACC,EAAiBC,IAC9CD,aAAkB,OAASA,EAAO,QAC7B,GAAGC,CAAO,KAAKD,EAAO,OAAO,GAElC,OAAOA,GAAW,UAAYA,EAAO,KAAA,EAAO,OACvC,GAAGC,CAAO,KAAKD,CAAM,GAEvBC,EACN,CAAA,CAAE,EAICC,EAAWH,EAAAA,YAAY,SAAY,CACvCV,EAAe,EAAI,EACnB,GAAI,CAEF,MAAMc,GADO,MAAMC,EAAA,GACD,OAAS,CAAA,EAC3BxB,EAASuB,CAAI,EACTA,EAAK,OACPpB,EAAasB,GACPA,GAAQF,EAAK,SAASE,CAAI,EACrBA,EAGPF,EAAK,KAAMG,GAASA,EAAK,YAAA,IAAkB,UAAU,GAAK,MAC1CH,EAAK,CAAC,CACzB,EAEDpB,EAAY,EAAE,CAElB,OAASwB,EAAO,CACdX,EAAKE,EAAcS,EAAO,4BAA4B,EAAG,OAAO,CAClE,QAAA,CACElB,EAAe,EAAK,CACtB,CACF,EAAG,CAACS,EAAeF,CAAI,CAAC,EAElBY,EAAWT,EAAAA,YACf,MAAOU,EAAcC,EAAuB,KAAU,CACpD,GAAKD,EACL,CAAIC,KAA+B,EAAI,EACvC,GAAI,CACF,MAAM5C,EAAO,MAAM6C,EAAWF,CAAI,EAClCxB,EAAWnB,CAAI,CACjB,OAASyC,EAAO,CACdX,EAAKE,EAAcS,EAAO,kBAAkBE,CAAI,EAAE,EAAG,OAAO,CAC9D,QAAA,CACMC,KAA+B,EAAK,CAC1C,EACF,EACA,CAACZ,EAAeF,CAAI,CAAA,EAItBgB,OAAAA,EAAAA,UAAU,IAAM,CACd,GAAI,CAAC1B,GAAc,CAACF,GAAW,CAACQ,EAAO,QAAS,OAEhD,MAAMqB,EAAUrB,EAAO,QAEjBsB,EAAiB,IAAM,CAC3B,MAAMC,EAAS,CACb,UAAWF,EAAQ,UACnB,aAAcA,EAAQ,aACtB,aAAcA,EAAQ,YAAA,EAIxBA,EAAQ,UAAYA,EAAQ,aAE5B,MAAMG,EAAQ,CACZ,UAAWH,EAAQ,UACnB,aAAcA,EAAQ,aACtB,aAAcA,EAAQ,YAAA,EAGxB,QAAQ,IAAI,6BAA8B,CACxC,OAAAE,EACA,MAAAC,EACA,QAASD,EAAO,YAAcC,EAAM,SAAA,CACrC,CACH,EAIMC,EAAqB,CAAA,EAG3B,OAAC,EAAG,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,EAAE,QAAQC,GAAS,CACjDD,EAAS,KAAK,OAAO,WAAWH,EAAgBI,CAAK,CAAC,CACxD,CAAC,EAGD,sBAAsBJ,CAAc,EACpC,sBAAsB,IAAM,CAC1B,sBAAsBA,CAAc,CACtC,CAAC,EAEM,IAAM,CACXG,EAAS,QAAQE,GAAK,OAAO,aAAaA,CAAC,CAAC,CAC9C,CACF,EAAG,CAACnC,EAASE,CAAU,CAAC,EAGxB0B,EAAAA,UAAU,IAAM,CACd,MAAMQ,EAAa5B,EAAO,QAC1B,GAAI,CAAC4B,EAAY,OAEjB,IAAIC,EAAqBD,EAAW,UAEpC,MAAME,EAAe,IAAM,CACzB,KAAM,CAAE,UAAAC,EAAW,aAAAC,EAAc,aAAAC,CAAA,EAAiBL,EAC5CM,EAAeF,EAAeD,EAAYE,EAAe,GAG3DF,EAAYF,GAAsB,CAACK,GACrCvC,EAAc,EAAK,EAGrBkC,EAAqBE,CACvB,EAEA,OAAAH,EAAW,iBAAiB,SAAUE,EAAc,CAAE,QAAS,GAAM,EAC9D,IAAM,CACXF,EAAW,oBAAoB,SAAUE,CAAY,CACvD,CACF,EAAG,CAAA,CAAE,EAELV,EAAAA,UAAU,IAAM,CACTV,EAAA,CACP,EAAG,CAACA,CAAQ,CAAC,EAEbU,EAAAA,UAAU,IAAM,CACV9B,GACG0B,EAAS1B,EAAU,EAAI,CAEhC,EAAG,CAACA,EAAU0B,CAAQ,CAAC,EAEvBmB,EACE,IAAM,CACA7C,GACG0B,EAAS1B,EAAU,EAAK,CAEjC,EACAJ,EAAS,IAAO,IAAA,SAMf,UAAA,CAAQ,UAAU,OAAO,MAAO,CAAE,OAAQ,sBAAuB,QAAS,OAAQ,cAAe,SAAU,OAAQ,EAAG,QAAS,GAC9H,SAAA,CAAAkD,EAAAA,IAAC,MAAA,CAAI,UAAU,cAAc,MAAO,CAAE,WAAY,CAAA,EAAK,SAAA,MAAA,CAAI,SAC1D,MAAA,CAAI,UAAU,YAAY,MAAO,CAAE,KAAM,EAAG,QAAS,OAAQ,cAAe,SAAU,SAAU,SAAU,QAAS,QAClH,SAAA,CAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,MAAM,MAAO,CAAE,WAAY,EAAG,aAAc,MAAA,EACzD,SAAA,CAAAD,EAAAA,IAAC,OAAI,UAAU,YACb,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,QACb,SAAA,CAAAD,EAAAA,IAAC,SAAM,SAAA,UAAA,CAAQ,EACfA,EAAAA,IAACE,EAAA,CACC,QAASnD,EAAM,IAAIoD,IAAM,CAAE,MAAOA,EAAG,MAAOA,CAAA,EAAI,EAChD,MAAOjD,EAAW,CAAE,MAAOA,EAAU,MAAOA,GAAa,KACzD,SAAWkD,GAAWjD,EAAYiD,GAAQ,OAAS,EAAE,EACrD,WAAY,CAACrD,EAAM,OACnB,OAAQlB,EAAA,CAAgB,CAAA,CAC1B,CAAA,CACF,CAAA,CACF,EACAoE,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAD,EAAAA,IAAC,SAAM,SAAA,GAAA,CAAM,EACbC,OAAC,OAAI,UAAU,MAAM,MAAO,CAAE,WAAY,UACxC,SAAA,CAAAA,EAAAA,KAAC,SAAA,CAAO,UAAU,YAAY,QAAS,IAAM,KAAK3B,EAAA,EAAY,SAAUd,EACtE,SAAA,CAAAwC,EAAAA,IAACK,EAAA,CAAU,IAAKC,CAAA,CAAa,EAAE,aAAA,EAEjC,EACAL,EAAAA,KAAC,SAAA,CACC,UAAU,MACV,QAAS,IACP/C,GAAY,OAAO,KAAKqD,EAAkBrD,CAAQ,EAAG,QAAQ,EAE/D,SAAU,CAACA,EAEX,SAAA,CAAA8C,EAAAA,IAACK,EAAA,CAAU,IAAK1E,CAAA,CAAc,EAAE,UAAA,CAAA,CAAA,EAGlCsE,OAAC,SAAM,UAAU,cAAc,MAAO,CAAE,OAAQ,WAC9C,SAAA,CAAAD,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,QAAS1C,EACT,SAAWkD,GAAUjD,EAAciD,EAAM,OAAO,OAAO,CAAA,CAAA,EAEzDR,EAAAA,IAACK,EAAA,CAAU,IAAKzE,CAAA,CAAU,EAC1BoE,EAAAA,IAAC,QAAK,SAAA,aAAA,CAAW,CAAA,CAAA,CACnB,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EACAA,EAAAA,IAAC,MAAA,CAAI,IAAKpC,EAAQ,MAAO,CACvB,KAAM,EACN,UAAW,EACX,SAAU,OACV,gBAAiB,UACjB,aAAc,MACd,QAAS,MAAA,EAER,SAAAF,EACCuC,EAAAA,KAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,WAAY,SAAU,eAAgB,SAAU,OAAQ,OAAQ,MAAO,QACpG,SAAA,CAAAD,MAAC,QAAK,UAAU,UAAU,MAAO,CAAE,YAAa,OAAS,EAAE,iBAAA,CAAA,CAE7D,EACE5C,EACF6C,EAAAA,KAAAQ,EAAAA,SAAA,CACE,SAAA,CAAAT,EAAAA,IAAC,MAAA,CACC,IAAKlC,EACL,MAAO,CACL,OAAQ,EACR,WAAY,WACZ,WAAY,gEACZ,SAAU,OACV,WAAY,MACZ,MAAO,UACP,QAAS,EACT,UAAW,MAAA,EAEb,wBAAyB,CAAE,OAAQ7B,EAAWmB,CAAO,CAAA,CAAE,CAAA,EAEzD4C,EAAAA,IAAC,MAAA,CAAI,IAAKjC,EAAiB,MAAO,CAAE,OAAQ,MAAO,MAAO,MAAM,CAAG,CAAA,CAAA,CACrE,QAEC,MAAA,CAAI,MAAO,CAAE,MAAO,MAAA,EAAU,SAAA,uCAAA,CAAqC,CAAA,CAExE,CAAA,CAAA,CACF,CAAA,EACF,CAEJ"}